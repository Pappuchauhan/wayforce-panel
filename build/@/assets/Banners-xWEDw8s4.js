import{r as i,S as V,j as e,d as s,u as Q}from"./index-tXNXoeRs.js";import{l as W,f as X}from"./Layout-7PXJC5ix.js";import{B as D,D as z,E as Y}from"./EditDeleteButton-x2TMEOE3.js";import{u as $}from"./useAsync-mFMgt6Cb.js";import{T as R,D as ee,u as H,M as Z}from"./DrawerButton-F3DRAt7t.js";import{u as se}from"./useFilter-8scIczCo.js";import{P as ae}from"./PageTitle-jIYcOIh7.js";import"./Tree-8U4K9iEM.js";import{a as L,n as M}from"./toast-1_nHReMg.js";import"./httpService-W4D8ylqE.js";import"./index.prod-zJvzKw6K.js";import"./index-GA65FgQZ.js";import{E}from"./Error-02VYyjzt.js";import{I as _}from"./InputArea-6evCb6Ca.js";import{L as B}from"./LabelArea-ysbP6H95.js";import"./index-vevPY6Xp.js";import{u as te}from"./index.esm-MInxdUYi.js";import{u as q}from"./useUtilsFunction-cpByHX2w.js";import{S as re}from"./SwitchToggle-i_Htra1x.js";import{I as le}from"./ImageUpload-cSH9mr3b.js";import{T as ie}from"./TableLoading-ACMK_2k4.js";import{S as ne}from"./ShowHideButton-7NxpOWZo.js";import{N as de}from"./NotFound-JukgDXWl.js";import"./iconBase-2BF9gXMP.js";import"./spinner-R50PTWTV.js";import"./AdminServices-uOdDQ_SW.js";import"./ProductServices-dm5sYQJF.js";import"./LanguageServices-fZF5pM4d.js";import"./UserServices-TL_joi2w.js";import"./Tooltip-tbnP4Kxc.js";import"./SelectLanguageTwo-ekPVoEE3.js";import"./SettingServices-U-Kr69tQ.js";import"./useDispatch-FcLvS5kM.js";import"./index-sWrY0pZa.js";import"./tslib.es6-YYMLUA4o.js";const me=r=>{const{isDrawerOpen:l,closeDrawer:j,setIsUpdate:g,lang:o}=i.useContext(V),[f,h]=i.useState(""),[p,b]=i.useState(o),[T,w]=i.useState({}),[x,y]=i.useState(!1),[a,n]=i.useState(!1),[S,d]=i.useState(!1),[N,I]=i.useState(""),{currency:A}=q(),{register:O,handleSubmit:U,setValue:m,clearErrors:v,formState:{errors:P},getValues:k}=te(),J=async u=>{var C,t;try{d(!0);const c=new FormData;if(c.append("title",u.title),c.append("other",u.other),c.append("status",x?"Active":"Inactive"),c.append("image",N),r){const F=await D.updateBanner(r,c);g(!0),d(!1),M(F.message),j()}else{const F=await D.addBanner(c);g(!0),d(!1),M(F.message),j()}}catch(c){L(((t=(C=c==null?void 0:c.response)==null?void 0:C.data)==null?void 0:t.message)||(c==null?void 0:c.message)),d(!1),j()}},K=u=>{b(u),Object.keys(T).length>0&&m("title",T.title[u||"en"])};return i.useEffect(()=>{if(!l){w({}),m("title"),m("other"),m("image"),m("status"),h(""),v("title"),v("other"),v("image"),v("status"),b(o),m("language",p);return}r&&(async()=>{var u,C;try{const t=await D.getBannerById(r);t&&(w(t),m("title",t.title),m("other",t.other),m("status",t.status),m("image",t.image),y(t.status==="Active"),h(t.image))}catch(t){L(((C=(u=t==null?void 0:t.response)==null?void 0:u.data)==null?void 0:C.message)||(t==null?void 0:t.message))}})()},[r,m,l,v,p,o]),{register:O,handleSubmit:U,onSubmit:J,errors:P,setImageUrl:h,imageUrl:f,published:x,setPublished:y,currency:A,discountType:a,isSubmitting:S,setDiscountType:n,handleSelectLanguage:K,bannerImage:N,setBannerImage:I,getValues:k}},G=({id:r})=>{const{register:l,handleSubmit:j,onSubmit:g,errors:o,setImageUrl:f,imageUrl:h,published:p,setPublished:b,currency:T,discountType:w,setDiscountType:x,isSubmitting:y,bannerImage:a,setBannerImage:n,handleSelectLanguage:S,getValues:d}=me(r);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full relative  p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300 ",children:r?e.jsx(R,{register:l,title:"Update Banner",description:"Update your banner and necessary information from here"}):e.jsx(R,{register:l,title:"Add Banner",description:"Add your banner and necessary information from here"})}),e.jsx(W.Scrollbars,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:e.jsxs("form",{onSubmit:j(g),children:[e.jsxs("div",{className:"px-6 pt-8 flex-grow scrollbar-hide w-full max-h-full pb-40",children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(B,{label:"Banner Image"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(le,{name:"image",onUpload:N=>n(N)}),d("image")!==void 0&&d("image")!=""&&e.jsx("img",{src:d("image"),alt:"image",style:{height:"150px"}})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(B,{label:"Title"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(_,{register:l,label:"Title",name:"title",type:"text",placeholder:"Title"}),e.jsx(E,{errorName:o.title})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(B,{label:"Other"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(_,{register:l,label:"Other",name:"other",type:"text",placeholder:"Other"}),e.jsx(E,{errorName:o.other})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(B,{label:"Status"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(re,{handleProcess:b,processOption:p}),e.jsx(E,{errorName:o.productType})]})]})]}),e.jsx(ee,{id:r,title:"Banner",isSubmitting:y})]})})]})},ce=({isCheck:r,coupons:l,setIsCheck:j})=>{const[g,o]=i.useState([]),{title:f,serviceId:h,handleModalOpen:p,handleUpdate:b}=H(),{currency:T,showDateFormat:w,globalSetting:x,showingTranslateValue:y}=q();return i.useEffect(()=>{const a=l==null?void 0:l.map(n=>{const S=new Date(n==null?void 0:n.updatedAt).toLocaleString("en-US",{timeZone:x==null?void 0:x.default_time_zone});return{...n,updatedDate:S}});o(a)},[l,x==null?void 0:x.default_time_zone]),e.jsxs(e.Fragment,{children:[r.length<1&&e.jsx(z,{id:h,title:f}),r.length<2&&e.jsx(Z,{children:e.jsx(G,{id:h})}),e.jsx(s.TableBody,{children:g==null?void 0:g.map((a,n)=>e.jsxs(s.TableRow,{children:[e.jsx(s.TableCell,{children:e.jsx("div",{className:"flex items-center",children:a!=null&&a.image?e.jsx(s.Avatar,{className:"hidden p-1 mr-2 md:block bg-gray-50 shadow-none",src:a==null?void 0:a.image,alt:"product"}):e.jsx(s.Avatar,{src:"https://res.cloudinary.com/ahossain/image/upload/v1655097002/placeholder_kvepfp.png",alt:"product"})})}),e.jsx(s.TableCell,{children:e.jsxs("span",{className:"text-sm",children:[" ",a==null?void 0:a.title]})}),e.jsx(s.TableCell,{children:e.jsxs("span",{className:"text-sm",children:[" ",a==null?void 0:a.other]})}),e.jsx(s.TableCell,{className:"text-center",children:e.jsx(ne,{id:a._id,status:a.status=="Active"?"show":"hide"})}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm",children:w(a.createdAt)})}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm",children:w(a.updatedAt)})}),e.jsx(s.TableCell,{children:e.jsx(Y,{id:a==null?void 0:a._id,isCheck:r,handleUpdate:b,handleModalOpen:p,title:y(a==null?void 0:a.title)})})]},n+1))})]})},Ge=()=>{const{t:r}=Q(),{toggleDrawer:l,lang:j}=i.useContext(V),{data:g,loading:o,error:f}=$(D.getAllBanners);i.useState(!1);const[h,p]=i.useState([]),{allId:b,serviceId:T,handleDeleteMany:w,handleUpdateMany:x}=H(),{filename:y,isDisabled:a,couponRef:n,dataTable:S,serviceData:d,totalResults:N,resultsPerPage:I,handleChangePage:A,handleSelectFile:O,setSearchCoupon:U,handleSubmitCoupon:m,handleUploadMultiple:v,handleRemoveSelectFile:P}=se(g),k=()=>{U(""),n.current.value=""};return e.jsxs(e.Fragment,{children:[e.jsx(ae,{children:"Banner"}),e.jsx(z,{ids:b,setIsCheck:p,title:"Selected Banner"}),e.jsx(Z,{children:e.jsx(G,{id:T})}),e.jsx(s.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsx(s.CardBody,{children:e.jsxs("form",{onSubmit:m,className:"py-3 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex",children:[e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsx(s.Input,{ref:n,type:"search",placeholder:"Search Banner"})}),e.jsxs("div",{className:"flex items-center gap-2 flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:[e.jsx("div",{className:"w-full mx-1",children:e.jsx(s.Button,{type:"submit",className:"h-12 w-full bg-emerald-700",children:"Filter"})}),e.jsx("div",{className:"w-full mx-1",children:e.jsx(s.Button,{layout:"outline",onClick:k,type:"reset",className:"px-4 md:py-1 py-2 h-12 text-sm dark:bg-gray-700",children:e.jsx("span",{className:"text-black dark:text-gray-200",children:"Reset"})})}),e.jsx("div",{className:"w-full mx-1",children:e.jsxs(s.Button,{onClick:l,className:"w-full rounded-md h-12",children:[e.jsx("span",{className:"mr-2",children:e.jsx(X,{})}),"Add Banner"]})})]})]})})}),o?e.jsx(ie,{row:12,col:8,width:140,height:20}):f?e.jsx("span",{className:"text-center mx-auto text-red-500",children:f}):(d==null?void 0:d.length)!==0?e.jsxs(s.TableContainer,{className:"mb-8",children:[e.jsxs(s.Table,{children:[e.jsx(s.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(s.TableCell,{children:"Image"}),e.jsx(s.TableCell,{children:"Title"}),e.jsx(s.TableCell,{children:"Other"}),e.jsx(s.TableCell,{children:"Status"}),e.jsx(s.TableCell,{children:"Created"}),e.jsx(s.TableCell,{children:"Updated"}),e.jsx(s.TableCell,{className:"text-right",children:r("CoupTblActions")})]})}),e.jsx(ce,{lang:j,isCheck:h,coupons:S,setIsCheck:p})]}),e.jsx(s.TableFooter,{children:e.jsx(s.Pagination,{totalResults:N,resultsPerPage:I,onChange:A,label:"Table navigation"})})]}):e.jsx(de,{title:"Sorry, There are no banners right now."})]})};export{Ge as default};
