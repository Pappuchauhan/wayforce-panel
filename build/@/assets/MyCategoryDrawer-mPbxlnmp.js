import{r as l,A as O,S as T,e as q,j as e,u as V,d as C}from"./index-BcEi1spj.js";import{m as z,l as $}from"./Layout-U-v81hJw.js";import{u as G,E as D}from"./index.esm-VqXjgaqn.js";import{T as A,D as H}from"./DrawerButton-w5HYixQR.js";import{I as E}from"./InputArea-Q2156hLZ.js";import"./index-yCcgJFTK.js";import{M as I}from"./EditDeleteButton-B6KY25Fc.js";import{n as U,a as k}from"./toast-A2-s9beD.js";import{L as v}from"./LabelArea-KTLauW-z.js";import"./httpService-u1VH4XlH.js";import"./index-t9pRMUQ7.js";import{u as J}from"./index-Ew3kHuDS.js";const K=t=>{const{state:r}=l.useContext(O),{adminInfo:x}=r,{isDrawerOpen:m,closeDrawer:n,setIsUpdate:y,lang:d}=l.useContext(T),[g,p]=l.useState(d||"en"),[c,N]=l.useState({}),[h,u]=l.useState(!1),[j,S]=l.useState("");q();const{register:L,handleSubmit:P,setValue:i,clearErrors:b,formState:{errors:F}}=G(),M=async o=>{var f,a;try{u(!0);const s=new FormData;if(s.append("name",o.name),s.append("status",o.status),s.append("price",o.price),s.append("image",j),t){const w=await I.updateCategory(t,s);y(!0),u(!1),U(w.message),n()}else{const w=await I.addCategory(s);y(!0),u(!1),U(w.message),n()}}catch(s){k(s?(a=(f=s==null?void 0:s.response)==null?void 0:f.data)==null?void 0:a.message:s==null?void 0:s.message),u(!1),n()}},R=async()=>{var o,f;try{const a=await I.getCategoryById(t);a&&(N(a),i("name",a.data.name),i("price",a.data.price),i("status",a.data.status))}catch(a){k(a?(f=(o=a==null?void 0:a.response)==null?void 0:o.data)==null?void 0:f.message:a==null?void 0:a.message)}},B=o=>{p(o),Object.keys(c).length>0&&i("name",c.name[o||"en"])};return l.useEffect(()=>{if(!m){N({}),i("name"),i("price"),i("status"),b("name"),b("price"),b("status"),p(d),i("language",g);return}t&&R()},[t,i,m,x.email,b]),{register:L,handleSubmit:P,onSubmit:M,language:g,errors:F,isSubmitting:h,handleSelectLanguage:B,categoryImage:j,setCategoryImage:S}},Q=({onUpload:t})=>{const[r,x]=l.useState(null),m=l.useCallback(g=>{const p=g[0];t(p);const c=new FileReader;c.onload=()=>{x(c.result)},c.readAsDataURL(p)},[t]),{getRootProps:n,getInputProps:y,isDragActive:d}=J({onDrop:m});return e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsxs("div",{...n(),className:`border-2 border-gray-300 dark:border-gray-600 border-dashed rounded-md cursor-pointer px-6 pt-5 pb-6 ${d?"bg-gray-200":""}`,children:[e.jsx("input",{...y(),accept:"image/*",className:"hidden"}),e.jsx("span",{className:"mx-auto flex justify-center",children:e.jsx(z,{className:"text-3xl text-emerald-500"})}),e.jsx("p",{className:"text-sm mt-2",children:d?"Drop your images here":"Drag your images here"}),e.jsx("em",{className:"text-xs text-gray-400",children:"(Only *.jpeg, *.webp, and *.png images will be accepted)"})]}),r&&e.jsx("div",{className:"mt-4",children:e.jsx("img",{src:r,alt:"Preview",className:"max-w-xs max-h-xs"})})]})},ne=({id:t})=>{const{register:r,handleSubmit:x,onSubmit:m,errors:n,imageUrl:y,setImageUrl:d,isSubmitting:g,selectedDate:p,setSelectedDate:c,handleSelectLanguage:N,categoryImage:h,setCategoryImage:u}=K(t),{t:j}=V();return l.useEffect(()=>{console.log(h)},[h]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:t?e.jsx(A,{register:r,title:"Update Category",description:j("Updated your category necessary information from here")}):e.jsx(A,{register:r,title:"Add Category",description:"Add your category necessary information from here "})}),e.jsx($.Scrollbars,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:e.jsx(C.Card,{className:"overflow-y-scroll flex-grow scrollbar-hide w-full max-h-full",children:e.jsx(C.CardBody,{children:e.jsxs("form",{onSubmit:x(m),children:[e.jsxs("div",{className:"px-6 pt-8 flex-grow scrollbar-hide w-full max-h-full pb-40",children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(v,{label:"User Image"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(Q,{name:"image1",onUpload:S=>u(S)})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(v,{label:"Name"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(E,{register:r,label:"Name",name:"name",type:"text",placeholder:"Category name"}),e.jsx(D,{errorName:n.name})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(v,{label:"Price"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(E,{register:r,label:"Price",name:"price",type:"text",placeholder:"Category price"}),e.jsx(D,{errorName:n.name})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(v,{label:"Status"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsxs(C.Select,{name:"status",...r("status",{required:"status is required!"}),children:[e.jsx("option",{value:"",defaultValue:!0,hidden:!0,children:" Choose Status "}),e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"})]}),e.jsx(D,{errorName:n.status})]})]})]}),e.jsx(H,{id:t,title:"Category",isSubmitting:g})]})})})})]})};export{Q as I,ne as M};
