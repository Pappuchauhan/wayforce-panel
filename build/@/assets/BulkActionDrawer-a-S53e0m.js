import{j as e,r as d,e as ae,S as Y,d as w}from"./index-tXNXoeRs.js";import{R as re}from"./index-Z50dg0F-.js";import{M as te,T as W}from"./Tree-8U4K9iEM.js";import{a as le,T as oe}from"./DrawerButton-F3DRAt7t.js";import{i as ne,l as ie}from"./Layout-7PXJC5ix.js";import{E as S}from"./Error-02VYyjzt.js";import{n as k,a as U}from"./toast-1_nHReMg.js";import{L as t}from"./LabelArea-ysbP6H95.js";import{S as C}from"./SwitchToggle-i_Htra1x.js";import{T as J}from"./TextAreaCom-gx3LaGnR.js";import{u as ce}from"./index.esm-MInxdUYi.js";import{P as de,d as pe,e as ge,C as me,A as X}from"./ProductServices-dm5sYQJF.js";import{L as ue}from"./LanguageServices-fZF5pM4d.js";import{P as he}from"./ParentCategory-suav6tTG.js";import{u as xe}from"./useUtilsFunction-cpByHX2w.js";const Fe=({id:u,name:n,type:T,handleClick:N,isChecked:P})=>e.jsx(e.Fragment,{children:e.jsx("input",{id:u,name:n,type:T,onChange:N,checked:P})}),je=(u,n="en",T)=>{const[N,P]=d.useState(""),[A,b]=d.useState([]),p=ae(),[B,$]=d.useState(""),[g,K]=d.useState(!0),[L,x]=d.useState(!0),[i,M]=d.useState([]),[h,_]=d.useState([]),[V,G]=d.useState(!1),[R,j]=d.useState(""),{isBulkDrawerOpen:F,closeBulkDrawer:f,setIsUpdate:y}=d.useContext(Y),{register:q,handleSubmit:O,watch:E,setValue:r,clearErrors:a,formState:{errors:z}}=ce(),H=async v=>{var s,m,l;try{const c={ids:u,categories:i==null?void 0:i.map(o=>o._id),category:(s=h[0])==null?void 0:s._id,productType:[V?"food":"others"],show:v.show,status:g?"show":"hide",tag:JSON.stringify(A)},D={ids:u,status:g?"show":"hide"},I={ids:u,enabled:g?"show":"hide",live_exchange_rates:L?"show":"hide"},Q={ids:u,parentId:B,description:v.description,parentName:R,status:g?"show":"hide"},Z={ids:u,option:v.option,status:g?"show":"hide"},ee={ids:u,currentId:T,changeId:v.groupName,status:g?"show":"hide"},se={ids:u,startTime:v.startTime,endTime:v.endTime,status:g?"show":"hide"};if(p.pathname==="/products"){const o=await de.updateManyProducts(c);y(!0),k(o.message),f()}if(p.pathname==="/coupons"){const o=await pe.updateManyCoupons(se);y(!0),k(o.message),f()}if(p.pathname==="/languages"){const o=await ue.updateManyLanguage(D);y(!0),k(o.message),f()}if(p.pathname==="/currencies"){const o=await ge.updateManyCurrencies(I);y(!0),k(o.message),f()}if(p.pathname==="/categories"||p.pathname===`/categories/${T}`){const o=await me.updateManyCategory(Q);y(!0),k(o.message),f()}if(p.pathname==="/attributes"){const o=await X.updateManyAttribute(Z);y(!0),k(o.message),f()}if(p.pathname===`/attributes/${p.pathname.split("/")[2]}`){const o=await X.updateManyChildAttribute(ee);y(!0),k(o.message),f()}}catch(c){U(((l=(m=c==null?void 0:c.response)==null?void 0:m.data)==null?void 0:l.message)||(c==null?void 0:c.message))}};return d.useEffect(()=>{if(!F){r("parent"),r("children"),r("type"),r("show"),r("name"),P(""),b([]),a("parent"),a("children"),a("type"),a("name"),r("name"),r("iso_code"),r("call_prefix"),r("currency"),r("zone"),a("name"),a("iso_code"),a("call_prefix"),a("currency"),a("zone"),a("status"),r("name"),r("iso_code"),r("country"),r("zone"),r("description"),a("name"),a("iso_code"),a("country"),a("zone"),a("status"),a("show"),a("description"),_([]),M([]);return}},[r,F,a]),d.useEffect(()=>{P(E("children"))},[E,N]),{register:q,watch:E,handleSubmit:O,onSubmit:H,errors:z,tag:A,setTag:b,published:g,setPublished:K,published2:L,setPublished2:x,checked:B,setChecked:$,selectedCategory:i,setSelectedCategory:M,defaultCategory:h,setDefaultCategory:_,selectCategoryName:R,setSelectCategoryName:j,isFoodItem:V,setIsFoodItem:G}},Ee=({ids:u,title:n,lang:T,data:N,childId:P,attributes:A,isCheck:b})=>{const{toggleBulkDrawer:p,isBulkDrawerOpen:B,closeBulkDrawer:$}=d.useContext(Y),{showingTranslateValue:g}=xe(),{tag:K,setTag:L,published:x,register:i,onSubmit:M,errors:h,checked:_,setChecked:V,resetRefTwo:G,handleSubmit:R,setPublished:j,selectedCategory:F,setSelectedCategory:f,defaultCategory:y,setDefaultCategory:q,selectCategoryName:O,setSelectCategoryName:E}=je(u,T,P),r={motionName:"node-motion",motionAppear:!1,onAppearStart:s=>({height:0}),onAppearActive:s=>({height:s.scrollHeight}),onLeaveStart:s=>({height:s.offsetHeight}),onLeaveActive:()=>({height:0})},a=s=>{let m=[];for(let l of s)m.push({title:g(l==null?void 0:l.name),key:l._id,children:l.children.length>0&&a(l.children)});return m},z=(s,m)=>{var l;return s._id===m?s:(l=s==null?void 0:s.children)==null?void 0:l.reduce((c,D)=>c??z(D,m),void 0)},H=s=>{var l,c;const m=b==null?void 0:b.find(D=>D===s);if((b==null?void 0:b.length)===((c=(l=N[0])==null?void 0:l.children)==null?void 0:c.length))return U("This can't be select as a parent category!");if(m!==void 0)return U("This can't be select as a parent category!");if(s===P)return U("This can't be select as a parent category!");{if(s===void 0)return;V(s);const D=N[0],I=z(D,s);E(g(I==null?void 0:I.name))}},v=`
  .rc-tree-child-tree {
    display: hidden;
  }
  .node-motion {
    transition: all .3s;
    overflow-y: hidden;
  }
`;return e.jsx(e.Fragment,{children:e.jsxs(le,{open:B,onClose:$,parent:null,level:null,placement:"right",children:[e.jsx("button",{onClick:p,className:"absolute z-50 text-red-500 hover:bg-red-100 hover:text-gray-700 transition-colors duration-150 bg-white shadow-md mr-6 mt-6 right-0 left-auto w-10 h-10 rounded-full block text-center",children:e.jsx(ne,{className:"mx-auto"})}),e.jsxs("div",{className:"flex flex-col w-full h-full justify-between",children:[e.jsx("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:e.jsx(oe,{title:`Update Selected ${n}`,description:`Apply changes to the selected ${n} from the list`})}),e.jsx(ie.Scrollbars,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:e.jsxs("form",{onSubmit:R(M),className:"block",children:[e.jsxs("div",{className:"px-6 pt-8 flex-grow w-full h-full max-h-full pb-40 md:pb-32 lg:pb-32 xl:pb-32",children:[n==="Products"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(t,{label:"Categorys"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(he,{lang:T,selectedCategory:F,setSelectedCategory:f,setDefaultCategory:q})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(t,{label:"Default Category"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(te,{displayValue:"name",isObject:!0,singleSelect:!0,ref:G,hidePlaceholder:!0,onKeyPressFn:function(){},onRemove:function(){},onSearch:function(){},onSelect:s=>q(s),selectedValues:y,options:F,placeholder:"Default Category"})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(t,{label:"Published"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(C,{handleProcess:j,processOption:x}),e.jsx(S,{errorName:h.status})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(t,{label:"Product Tags"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(re,{placeholder:"Product Tag (Write then press enter to add new tag )",tags:K,onChange:s=>L(s)})})]})]}),n==="Coupons"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(t,{label:"Start Time"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(w.Input,{...i("startTime",{required:"Coupon Validation Start Time"}),label:"Coupon Validation Start Time",name:"startTime",type:"datetime-local",placeholder:"Start Time"}),e.jsx(S,{errorName:h.startTime})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(t,{label:"End Time"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(w.Input,{...i("endTime",{required:"Coupon Validation End Time"}),label:"Coupon Validation End Time",name:"endTime",type:"datetime-local",placeholder:"End Time"}),e.jsx(S,{errorName:h.endTime})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(t,{label:"Published"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(C,{handleProcess:j,processOption:x}),e.jsx(S,{errorName:h.published})]})]})]}),n==="Languages"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(t,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(C,{title:"",processOption:x,handleProcess:j})})]})}),n==="Currencies"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(t,{label:"Enabled"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(C,{title:"",processOption:x,handleProcess:j})})]})}),n==="Categories"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(t,{label:"Description"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(J,{required:!0,register:i,label:"Description",name:"description",type:"text",placeholder:"Category Description"}),e.jsx(S,{errorName:h.description})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(t,{label:"Parent Category"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(w.Input,{readOnly:!0,...i("parent",{required:!1}),name:"parent",value:O||"Home",placeholder:"parent category",type:"text"}),e.jsxs("div",{className:"draggable-demo capitalize",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:v}}),e.jsx(W,{treeData:a(N),selectedKeys:[_],onSelect:s=>H(s[0]),motion:r,animation:"slide-up"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(t,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(C,{title:"",processOption:x,handleProcess:j})})]})]}),n==="Child Categories"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(t,{label:"Description"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(J,{required:!0,register:i,label:"Description",name:"description",type:"text",placeholder:"Category Description"}),e.jsx(S,{errorName:h.description})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(t,{label:"Parent Category"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(w.Input,{readOnly:!0,...i("parent",{required:!1}),name:"parent",value:O||"Home",placeholder:"parent category",type:"text"}),e.jsxs("div",{className:"draggable-demo capitalize",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:v}}),e.jsx(W,{treeData:a(N),selectedKeys:[_],onSelect:s=>H(s[0]),motion:r,animation:"slide-up"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(t,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(C,{title:"",processOption:x,handleProcess:j})})]})]}),n==="Attributes"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(t,{label:"Options"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsxs(w.Select,{name:"option",...i("option",{required:"Option is required!"}),children:[e.jsx("option",{value:"",defaultValue:!0,hidden:!0,children:"Select type"}),e.jsx("option",{value:"Dropdown",children:"Dropdown"}),e.jsx("option",{value:"Radio",children:"Radio"})]}),e.jsx(S,{errorName:h.option})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(t,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(C,{title:"",processOption:x,handleProcess:j})})]})]}),n==="Attribute Value(s)"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(t,{label:"Change Attribute Group"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsxs(w.Select,{name:"groupName",...i("groupName",{required:!1}),children:[e.jsx("option",{value:"",defaultValue:!0,hidden:!0,children:"Select Attribute Group"}),A==null?void 0:A.map((s,m)=>e.jsx("option",{value:s._id,children:g(s==null?void 0:s.name)},m+1))]}),e.jsx(S,{errorName:h.groupName})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(t,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(C,{title:"",processOption:x,handleProcess:j})})]})]})]}),e.jsxs("div",{className:"fixed bottom-0 w-full right-0 py-4 lg:py-8 px-6 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex bg-gray-50 border-t border-gray-100 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:[e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsx(w.Button,{onClick:p,className:" text-red-500 hover:bg-red-50 hover:border-red-100 hover:text-red-600 dark:bg-gray-700 dark:border-gray-700 dark:text-gray-500 dark:hover:bg-gray-800 dark:hover:text-red-700",layout:"outline",children:"Cancel"})}),e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsxs(w.Button,{type:"submit",className:"h-12 w-full",children:[" ","Bulk Update ",n]})})]})]})})]})]})})};export{Ee as B,Fe as C};
