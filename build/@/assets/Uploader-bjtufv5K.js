import{r as h,H as Pt,j as v,t as me}from"./index-CRSXLpVa.js";import{a as kt}from"./httpService-gtUOqNIr.js";import{u as xt}from"./index-OAF7JbAg.js";import{n as lt,m as Nt}from"./Layout-178xg5YB.js";import{$ as Rt,u as Mt}from"./index-yp5K6zvk.js";import{S as At}from"./SettingServices-r5Zw86ns.js";import{a as R,n as $t}from"./toast-b6AZ53PT.js";import{u as jt}from"./index-7lJi7sVA.js";var ft=h.createContext({dragDropManager:void 0}),E;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(E||(E={}));function f(t,r){for(var e=arguments.length,n=new Array(e>2?e-2:0),a=2;a<e;a++)n[a-2]=arguments[a];if(!t){var i;if(r===void 0)i=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;i=new Error(r.replace(/%s/g,function(){return n[o++]})),i.name="Invariant Violation"}throw i.framesToPop=1,i}}var de="dnd-core/INIT_COORDS",z="dnd-core/BEGIN_DRAG",ge="dnd-core/PUBLISH_DRAG_SOURCE",B="dnd-core/HOVER",K="dnd-core/DROP",Q="dnd-core/END_DRAG";function be(t,r){return{type:de,payload:{sourceClientOffset:r||null,clientOffset:t||null}}}function q(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?q=function(e){return typeof e}:q=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(t)}function Lt(t,r,e){return r.split(".").reduce(function(n,a){return n&&n[a]?n[a]:e||null},t)}function Ht(t,r){return t.filter(function(e){return e!==r})}function dt(t){return q(t)==="object"}function Ft(t,r){var e=new Map,n=function(o){e.set(o,e.has(o)?e.get(o)+1:1)};t.forEach(n),r.forEach(n);var a=[];return e.forEach(function(i,o){i===1&&a.push(o)}),a}function Ut(t,r){return t.filter(function(e){return r.indexOf(e)>-1})}var qt={type:de,payload:{clientOffset:null,sourceClientOffset:null}};function Gt(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{publishSource:!0},a=n.publishSource,i=a===void 0?!0:a,o=n.clientOffset,u=n.getSourceClientOffset,s=t.getMonitor(),c=t.getRegistry();t.dispatch(be(o)),Xt(e,s,c);var l=Vt(e,s);if(l===null){t.dispatch(qt);return}var g=null;if(o){if(!u)throw new Error("getSourceClientOffset must be defined");Wt(u),g=u(l)}t.dispatch(be(o,g));var m=c.getSource(l),y=m.beginDrag(s,l);if(y!=null){Yt(y),c.pinSource(l);var O=c.getSourceType(l);return{type:z,payload:{itemType:O,item:y,sourceId:l,clientOffset:o||null,sourceClientOffset:g||null,isSourcePublic:!!i}}}}}function Xt(t,r,e){f(!r.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(n){f(e.getSource(n),"Expected sourceIds to be registered.")})}function Wt(t){f(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function Yt(t){f(dt(t),"Item must be an object.")}function Vt(t,r){for(var e=null,n=t.length-1;n>=0;n--)if(r.canDragSource(t[n])){e=t[n];break}return e}function zt(t){return function(){var e=t.getMonitor();if(e.isDragging())return{type:ge}}}function oe(t,r){return r===null?t===null:Array.isArray(t)?t.some(function(e){return e===r}):t===r}function Bt(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.clientOffset;Kt(e);var i=e.slice(0),o=t.getMonitor(),u=t.getRegistry();Qt(i,o,u);var s=o.getItemType();return Jt(i,u,s),Zt(i,o,u),{type:B,payload:{targetIds:i,clientOffset:a||null}}}}function Kt(t){f(Array.isArray(t),"Expected targetIds to be an array.")}function Qt(t,r,e){f(r.isDragging(),"Cannot call hover while not dragging."),f(!r.didDrop(),"Cannot call hover after drop.");for(var n=0;n<t.length;n++){var a=t[n];f(t.lastIndexOf(a)===n,"Expected targetIds to be unique in the passed array.");var i=e.getTarget(a);f(i,"Expected targetIds to be registered.")}}function Jt(t,r,e){for(var n=t.length-1;n>=0;n--){var a=t[n],i=r.getTargetType(a);oe(i,e)||t.splice(n,1)}}function Zt(t,r,e){t.forEach(function(n){var a=e.getTarget(n);a.hover(r,n)})}function De(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,n)}return e}function Oe(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?De(Object(e),!0).forEach(function(n){er(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):De(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function er(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function tr(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.getMonitor(),a=t.getRegistry();rr(n);var i=ir(n);i.forEach(function(o,u){var s=nr(o,u,a,n),c={type:K,payload:{dropResult:Oe(Oe({},e),s)}};t.dispatch(c)})}}function rr(t){f(t.isDragging(),"Cannot call drop while not dragging."),f(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function nr(t,r,e,n){var a=e.getTarget(t),i=a?a.drop(n,t):void 0;return ar(i),typeof i>"u"&&(i=r===0?{}:n.getDropResult()),i}function ar(t){f(typeof t>"u"||dt(t),"Drop result must either be an object or undefined.")}function ir(t){var r=t.getTargetIds().filter(t.canDropOnTarget,t);return r.reverse(),r}function or(t){return function(){var e=t.getMonitor(),n=t.getRegistry();ur(e);var a=e.getSourceId();if(a!=null){var i=n.getSource(a,!0);i.endDrag(e,a),n.unpinSource()}return{type:Q}}}function ur(t){f(t.isDragging(),"Cannot call endDrag while not dragging.")}function sr(t){return{beginDrag:Gt(t),publishDragSource:zt(t),hover:Bt(t),drop:tr(t),endDrag:or(t)}}function cr(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Se(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function lr(t,r,e){return r&&Se(t.prototype,r),e&&Se(t,e),t}function j(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var fr=function(){function t(r,e){var n=this;cr(this,t),j(this,"store",void 0),j(this,"monitor",void 0),j(this,"backend",void 0),j(this,"isSetUp",!1),j(this,"handleRefCountChange",function(){var a=n.store.getState().refCount>0;n.backend&&(a&&!n.isSetUp?(n.backend.setup(),n.isSetUp=!0):!a&&n.isSetUp&&(n.backend.teardown(),n.isSetUp=!1))}),this.store=r,this.monitor=e,r.subscribe(this.handleRefCountChange)}return lr(t,[{key:"receiveBackend",value:function(e){this.backend=e}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.monitor.registry}},{key:"getActions",value:function(){var e=this,n=this.store.dispatch;function a(o){return function(){for(var u=arguments.length,s=new Array(u),c=0;c<u;c++)s[c]=arguments[c];var l=o.apply(e,s);typeof l<"u"&&n(l)}}var i=sr(this);return Object.keys(i).reduce(function(o,u){var s=i[u];return o[u]=a(s),o},{})}},{key:"dispatch",value:function(e){this.store.dispatch(e)}}]),t}(),dr=function(r,e){return r===e};function gr(t,r){return!t&&!r?!0:!t||!r?!1:t.x===r.x&&t.y===r.y}function hr(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:dr;if(t.length!==r.length)return!1;for(var n=0;n<t.length;++n)if(!e(t[n],r[n]))return!1;return!0}function Te(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,n)}return e}function Ie(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Te(Object(e),!0).forEach(function(n){vr(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Te(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function vr(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var we={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function pr(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:we,r=arguments.length>1?arguments[1]:void 0,e=r.payload;switch(r.type){case de:case z:return{initialSourceClientOffset:e.sourceClientOffset,initialClientOffset:e.clientOffset,clientOffset:e.clientOffset};case B:return gr(t.clientOffset,e.clientOffset)?t:Ie(Ie({},t),{},{clientOffset:e.clientOffset});case Q:case K:return we;default:return t}}var he="dnd-core/ADD_SOURCE",ve="dnd-core/ADD_TARGET",pe="dnd-core/REMOVE_SOURCE",J="dnd-core/REMOVE_TARGET";function yr(t){return{type:he,payload:{sourceId:t}}}function mr(t){return{type:ve,payload:{targetId:t}}}function br(t){return{type:pe,payload:{sourceId:t}}}function Dr(t){return{type:J,payload:{targetId:t}}}function Ce(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,n)}return e}function C(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Ce(Object(e),!0).forEach(function(n){Or(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Ce(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Or(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var Sr={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Tr(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Sr,r=arguments.length>1?arguments[1]:void 0,e=r.payload;switch(r.type){case z:return C(C({},t),{},{itemType:e.itemType,item:e.item,sourceId:e.sourceId,isSourcePublic:e.isSourcePublic,dropResult:null,didDrop:!1});case ge:return C(C({},t),{},{isSourcePublic:!0});case B:return C(C({},t),{},{targetIds:e.targetIds});case J:return t.targetIds.indexOf(e.targetId)===-1?t:C(C({},t),{},{targetIds:Ht(t.targetIds,e.targetId)});case K:return C(C({},t),{},{dropResult:e.dropResult,didDrop:!0,targetIds:[]});case Q:return C(C({},t),{},{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function Ir(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case he:case ve:return t+1;case pe:case J:return t-1;default:return t}}var V=[],ye=[];V.__IS_NONE__=!0;ye.__IS_ALL__=!0;function wr(t,r){if(t===V)return!1;if(t===ye||typeof r>"u")return!0;var e=Ut(r,t);return e.length>0}function Cr(){var t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:break;case he:case ve:case J:case pe:return V;case z:case ge:case Q:case K:default:return ye}var r=t.payload,e=r.targetIds,n=e===void 0?[]:e,a=r.prevTargetIds,i=a===void 0?[]:a,o=Ft(n,i),u=o.length>0||!hr(n,i);if(!u)return V;var s=i[i.length-1],c=n[n.length-1];return s!==c&&(s&&o.push(s),c&&o.push(c)),o}function Er(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return t+1}function Ee(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,n)}return e}function _e(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Ee(Object(e),!0).forEach(function(n){_r(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Ee(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function _r(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function Pr(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:Cr(t.dirtyHandlerIds,{type:r.type,payload:_e(_e({},r.payload),{},{prevTargetIds:Lt(t,"dragOperation.targetIds",[])})}),dragOffset:pr(t.dragOffset,r),refCount:Ir(t.refCount,r),dragOperation:Tr(t.dragOperation,r),stateId:Er(t.stateId)}}function kr(t,r){return{x:t.x+r.x,y:t.y+r.y}}function gt(t,r){return{x:t.x-r.x,y:t.y-r.y}}function xr(t){var r=t.clientOffset,e=t.initialClientOffset,n=t.initialSourceClientOffset;return!r||!e||!n?null:gt(kr(r,n),e)}function Nr(t){var r=t.clientOffset,e=t.initialClientOffset;return!r||!e?null:gt(r,e)}function Rr(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Pe(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Mr(t,r,e){return r&&Pe(t.prototype,r),e&&Pe(t,e),t}function ke(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var Ar=function(){function t(r,e){Rr(this,t),ke(this,"store",void 0),ke(this,"registry",void 0),this.store=r,this.registry=e}return Mr(t,[{key:"subscribeToStateChange",value:function(e){var n=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{handlerIds:void 0},i=a.handlerIds;f(typeof e=="function","listener must be a function."),f(typeof i>"u"||Array.isArray(i),"handlerIds, when specified, must be an array of strings.");var o=this.store.getState().stateId,u=function(){var c=n.store.getState(),l=c.stateId;try{var g=l===o||l===o+1&&!wr(c.dirtyHandlerIds,i);g||e()}finally{o=l}};return this.store.subscribe(u)}},{key:"subscribeToOffsetChange",value:function(e){var n=this;f(typeof e=="function","listener must be a function.");var a=this.store.getState().dragOffset,i=function(){var u=n.store.getState().dragOffset;u!==a&&(a=u,e())};return this.store.subscribe(i)}},{key:"canDragSource",value:function(e){if(!e)return!1;var n=this.registry.getSource(e);return f(n,"Expected to find a valid source. sourceId=".concat(e)),this.isDragging()?!1:n.canDrag(this,e)}},{key:"canDropOnTarget",value:function(e){if(!e)return!1;var n=this.registry.getTarget(e);if(f(n,"Expected to find a valid target. targetId=".concat(e)),!this.isDragging()||this.didDrop())return!1;var a=this.registry.getTargetType(e),i=this.getItemType();return oe(a,i)&&n.canDrop(this,e)}},{key:"isDragging",value:function(){return!!this.getItemType()}},{key:"isDraggingSource",value:function(e){if(!e)return!1;var n=this.registry.getSource(e,!0);if(f(n,"Expected to find a valid source. sourceId=".concat(e)),!this.isDragging()||!this.isSourcePublic())return!1;var a=this.registry.getSourceType(e),i=this.getItemType();return a!==i?!1:n.isDragging(this,e)}},{key:"isOverTarget",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shallow:!1};if(!e)return!1;var a=n.shallow;if(!this.isDragging())return!1;var i=this.registry.getTargetType(e),o=this.getItemType();if(o&&!oe(i,o))return!1;var u=this.getTargetIds();if(!u.length)return!1;var s=u.indexOf(e);return a?s===u.length-1:s>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return!!this.store.getState().dragOperation.isSourcePublic}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return xr(this.store.getState().dragOffset)}},{key:"getDifferenceFromInitialOffset",value:function(){return Nr(this.store.getState().dragOffset)}}]),t}(),$r=0;function jr(){return $r++}function G(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?G=function(e){return typeof e}:G=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(t)}function Lr(t){f(typeof t.canDrag=="function","Expected canDrag to be a function."),f(typeof t.beginDrag=="function","Expected beginDrag to be a function."),f(typeof t.endDrag=="function","Expected endDrag to be a function.")}function Hr(t){f(typeof t.canDrop=="function","Expected canDrop to be a function."),f(typeof t.hover=="function","Expected hover to be a function."),f(typeof t.drop=="function","Expected beginDrag to be a function.")}function ue(t,r){if(r&&Array.isArray(t)){t.forEach(function(e){return ue(e,!1)});return}f(typeof t=="string"||G(t)==="symbol",r?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}const xe=typeof global<"u"?global:self,ht=xe.MutationObserver||xe.WebKitMutationObserver;function vt(t){return function(){const e=setTimeout(a,0),n=setInterval(a,50);function a(){clearTimeout(e),clearInterval(n),t()}}}function Fr(t){let r=1;const e=new ht(t),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){r=-r,n.data=r}}const Ur=typeof ht=="function"?Fr:vt;class qr{enqueueTask(r){const{queue:e,requestFlush:n}=this;e.length||(n(),this.flushing=!0),e[e.length]=r}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:r}=this;for(;this.index<r.length;){const e=this.index;if(this.index++,r[e].call(),this.index>this.capacity){for(let n=0,a=r.length-this.index;n<a;n++)r[n]=r[n+this.index];r.length-=this.index,this.index=0}}r.length=0,this.index=0,this.flushing=!1},this.registerPendingError=r=>{this.pendingErrors.push(r),this.requestErrorThrow()},this.requestFlush=Ur(this.flush),this.requestErrorThrow=vt(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class Gr{call(){try{this.task&&this.task()}catch(r){this.onError(r)}finally{this.task=null,this.release(this)}}constructor(r,e){this.onError=r,this.release=e,this.task=null}}class Xr{create(r){const e=this.freeTasks,n=e.length?e.pop():new Gr(this.onError,a=>e[e.length]=a);return n.task=r,n}constructor(r){this.onError=r,this.freeTasks=[]}}const pt=new qr,Wr=new Xr(pt.registerPendingError);function Yr(t){pt.enqueueTask(Wr.create(t))}function Vr(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Ne(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function zr(t,r,e){return r&&Ne(t.prototype,r),e&&Ne(t,e),t}function M(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function Br(t,r){return Zr(t)||Jr(t,r)||Qr(t,r)||Kr()}function Kr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qr(t,r){if(t){if(typeof t=="string")return Re(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Re(t,r)}}function Re(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function Jr(t,r){var e=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(e!=null){var n=[],a=!0,i=!1,o,u;try{for(e=e.call(t);!(a=(o=e.next()).done)&&(n.push(o.value),!(r&&n.length===r));a=!0);}catch(s){i=!0,u=s}finally{try{!a&&e.return!=null&&e.return()}finally{if(i)throw u}}return n}}function Zr(t){if(Array.isArray(t))return t}function en(t){var r=jr().toString();switch(t){case E.SOURCE:return"S".concat(r);case E.TARGET:return"T".concat(r);default:throw new Error("Unknown Handler Role: ".concat(t))}}function Me(t){switch(t[0]){case"S":return E.SOURCE;case"T":return E.TARGET;default:f(!1,"Cannot parse handler ID: ".concat(t))}}function Ae(t,r){var e=t.entries(),n=!1;do{var a=e.next(),i=a.done,o=Br(a.value,2),u=o[1];if(u===r)return!0;n=!!i}while(!n);return!1}var tn=function(){function t(r){Vr(this,t),M(this,"types",new Map),M(this,"dragSources",new Map),M(this,"dropTargets",new Map),M(this,"pinnedSourceId",null),M(this,"pinnedSource",null),M(this,"store",void 0),this.store=r}return zr(t,[{key:"addSource",value:function(e,n){ue(e),Lr(n);var a=this.addHandler(E.SOURCE,e,n);return this.store.dispatch(yr(a)),a}},{key:"addTarget",value:function(e,n){ue(e,!0),Hr(n);var a=this.addHandler(E.TARGET,e,n);return this.store.dispatch(mr(a)),a}},{key:"containsHandler",value:function(e){return Ae(this.dragSources,e)||Ae(this.dropTargets,e)}},{key:"getSource",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;f(this.isSourceId(e),"Expected a valid source ID.");var a=n&&e===this.pinnedSourceId,i=a?this.pinnedSource:this.dragSources.get(e);return i}},{key:"getTarget",value:function(e){return f(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}},{key:"getSourceType",value:function(e){return f(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}},{key:"getTargetType",value:function(e){return f(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}},{key:"isSourceId",value:function(e){var n=Me(e);return n===E.SOURCE}},{key:"isTargetId",value:function(e){var n=Me(e);return n===E.TARGET}},{key:"removeSource",value:function(e){var n=this;f(this.getSource(e),"Expected an existing source."),this.store.dispatch(br(e)),Yr(function(){n.dragSources.delete(e),n.types.delete(e)})}},{key:"removeTarget",value:function(e){f(this.getTarget(e),"Expected an existing target."),this.store.dispatch(Dr(e)),this.dropTargets.delete(e),this.types.delete(e)}},{key:"pinSource",value:function(e){var n=this.getSource(e);f(n,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=n}},{key:"unpinSource",value:function(){f(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}},{key:"addHandler",value:function(e,n,a){var i=en(e);return this.types.set(i,n),e===E.SOURCE?this.dragSources.set(i,a):e===E.TARGET&&this.dropTargets.set(i,a),i}}]),t}();function rn(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=nn(n),i=new Ar(a,new tn(a)),o=new fr(a,i),u=t(o,r,e);return o.receiveBackend(u),o}function nn(t){var r=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return Pt(Pr,t&&r&&r({name:"dnd-core",instanceId:"dnd-core"}))}var an=["children"];function on(t,r){return ln(t)||cn(t,r)||sn(t,r)||un()}function un(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sn(t,r){if(t){if(typeof t=="string")return $e(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return $e(t,r)}}function $e(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function cn(t,r){var e=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(e!=null){var n=[],a=!0,i=!1,o,u;try{for(e=e.call(t);!(a=(o=e.next()).done)&&(n.push(o.value),!(r&&n.length===r));a=!0);}catch(s){i=!0,u=s}finally{try{!a&&e.return!=null&&e.return()}finally{if(i)throw u}}return n}}function ln(t){if(Array.isArray(t))return t}function fn(t,r){if(t==null)return{};var e=dn(t,r),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(e[n]=t[n])}return e}function dn(t,r){if(t==null)return{};var e={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(r.indexOf(a)>=0)&&(e[a]=t[a]);return e}var je=0,X=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__"),gn=h.memo(function(r){var e=r.children,n=fn(r,an),a=hn(n),i=on(a,2),o=i[0],u=i[1];return h.useEffect(function(){if(u){var s=yt();return++je,function(){--je===0&&(s[X]=null)}}},[]),v.jsx(ft.Provider,Object.assign({value:o},{children:e}),void 0)});function hn(t){if("manager"in t){var r={dragDropManager:t.manager};return[r,!1]}var e=vn(t.backend,t.context,t.options,t.debugMode),n=!t.context;return[e,n]}function vn(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yt(),e=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,a=r;return a[X]||(a[X]={dragDropManager:rn(t,r,e,n)}),a[X]}function yt(){return typeof global<"u"?global:window}function pn(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Le(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function yn(t,r,e){return r&&Le(t.prototype,r),e&&Le(t,e),t}function He(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var Z=!1,ee=!1,mn=function(){function t(r){pn(this,t),He(this,"internalMonitor",void 0),He(this,"sourceId",null),this.internalMonitor=r.getMonitor()}return yn(t,[{key:"receiveHandlerId",value:function(e){this.sourceId=e}},{key:"getHandlerId",value:function(){return this.sourceId}},{key:"canDrag",value:function(){f(!Z,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Z=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Z=!1}}},{key:"isDragging",value:function(){if(!this.sourceId)return!1;f(!ee,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return ee=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{ee=!1}}},{key:"subscribeToStateChange",value:function(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}},{key:"isDraggingSource",value:function(e){return this.internalMonitor.isDraggingSource(e)}},{key:"isOverTarget",value:function(e,n){return this.internalMonitor.isOverTarget(e,n)}},{key:"getTargetIds",value:function(){return this.internalMonitor.getTargetIds()}},{key:"isSourcePublic",value:function(){return this.internalMonitor.isSourcePublic()}},{key:"getSourceId",value:function(){return this.internalMonitor.getSourceId()}},{key:"subscribeToOffsetChange",value:function(e){return this.internalMonitor.subscribeToOffsetChange(e)}},{key:"canDragSource",value:function(e){return this.internalMonitor.canDragSource(e)}},{key:"canDropOnTarget",value:function(e){return this.internalMonitor.canDropOnTarget(e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),t}();function bn(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Fe(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Dn(t,r,e){return r&&Fe(t.prototype,r),e&&Fe(t,e),t}function Ue(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var te=!1,On=function(){function t(r){bn(this,t),Ue(this,"internalMonitor",void 0),Ue(this,"targetId",null),this.internalMonitor=r.getMonitor()}return Dn(t,[{key:"receiveHandlerId",value:function(e){this.targetId=e}},{key:"getHandlerId",value:function(){return this.targetId}},{key:"subscribeToStateChange",value:function(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}},{key:"canDrop",value:function(){if(!this.targetId)return!1;f(!te,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return te=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{te=!1}}},{key:"isOver",value:function(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),t}();function Sn(t){if(typeof t.type!="string"){var r=t.type.displayName||t.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors."+"You can either wrap ".concat(r," into a <div>, or turn it into a ")+"drag source or a drop target itself.")}}function Tn(t){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!h.isValidElement(r)){var n=r;return t(n,e),n}var a=r;Sn(a);var i=e?function(o){return t(o,e)}:t;return In(a,i)}}function mt(t){var r={};return Object.keys(t).forEach(function(e){var n=t[e];if(e.endsWith("Ref"))r[e]=t[e];else{var a=Tn(n);r[e]=function(){return a}}}),r}function qe(t,r){typeof t=="function"?t(r):t.current=r}function In(t,r){var e=t.ref;return f(typeof e!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),e?h.cloneElement(t,{ref:function(a){qe(e,a),qe(r,a)}}):h.cloneElement(t,{ref:r})}function W(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?W=function(e){return typeof e}:W=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(t)}function se(t){return t!==null&&W(t)==="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function ce(t,r,e,n){var a=e?e.call(n,t,r):void 0;if(a!==void 0)return!!a;if(t===r)return!0;if(typeof t!="object"||!t||typeof r!="object"||!r)return!1;var i=Object.keys(t),o=Object.keys(r);if(i.length!==o.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(r),s=0;s<i.length;s++){var c=i[s];if(!u(c))return!1;var l=t[c],g=r[c];if(a=e?e.call(n,l,g,c):void 0,a===!1||a===void 0&&l!==g)return!1}return!0}function wn(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Ge(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Cn(t,r,e){return r&&Ge(t.prototype,r),e&&Ge(t,e),t}function I(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var En=function(){function t(r){var e=this;wn(this,t),I(this,"hooks",mt({dragSource:function(a,i){e.clearDragSource(),e.dragSourceOptions=i||null,se(a)?e.dragSourceRef=a:e.dragSourceNode=a,e.reconnectDragSource()},dragPreview:function(a,i){e.clearDragPreview(),e.dragPreviewOptions=i||null,se(a)?e.dragPreviewRef=a:e.dragPreviewNode=a,e.reconnectDragPreview()}})),I(this,"handlerId",null),I(this,"dragSourceRef",null),I(this,"dragSourceNode",void 0),I(this,"dragSourceOptionsInternal",null),I(this,"dragSourceUnsubscribe",void 0),I(this,"dragPreviewRef",null),I(this,"dragPreviewNode",void 0),I(this,"dragPreviewOptionsInternal",null),I(this,"dragPreviewUnsubscribe",void 0),I(this,"lastConnectedHandlerId",null),I(this,"lastConnectedDragSource",null),I(this,"lastConnectedDragSourceOptions",null),I(this,"lastConnectedDragPreview",null),I(this,"lastConnectedDragPreviewOptions",null),I(this,"backend",void 0),this.backend=r}return Cn(t,[{key:"receiveHandlerId",value:function(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}},{key:"connectTarget",get:function(){return this.dragSource}},{key:"dragSourceOptions",get:function(){return this.dragSourceOptionsInternal},set:function(e){this.dragSourceOptionsInternal=e}},{key:"dragPreviewOptions",get:function(){return this.dragPreviewOptionsInternal},set:function(e){this.dragPreviewOptionsInternal=e}},{key:"reconnect",value:function(){this.reconnectDragSource(),this.reconnectDragPreview()}},{key:"reconnectDragSource",value:function(){var e=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();if(n&&this.disconnectDragSource(),!!this.handlerId){if(!e){this.lastConnectedDragSource=e;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions))}}},{key:"reconnectDragPreview",value:function(){var e=this.dragPreview,n=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!e){this.lastConnectedDragPreview=e;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=e,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,e,this.dragPreviewOptions))}}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didConnectedDragSourceChange",value:function(){return this.lastConnectedDragSource!==this.dragSource}},{key:"didConnectedDragPreviewChange",value:function(){return this.lastConnectedDragPreview!==this.dragPreview}},{key:"didDragSourceOptionsChange",value:function(){return!ce(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}},{key:"didDragPreviewOptionsChange",value:function(){return!ce(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}},{key:"disconnectDragSource",value:function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}},{key:"disconnectDragPreview",value:function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}},{key:"dragSource",get:function(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}},{key:"dragPreview",get:function(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}},{key:"clearDragSource",value:function(){this.dragSourceNode=null,this.dragSourceRef=null}},{key:"clearDragPreview",value:function(){this.dragPreviewNode=null,this.dragPreviewRef=null}}]),t}();function _n(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Xe(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Pn(t,r,e){return r&&Xe(t.prototype,r),e&&Xe(t,e),t}function P(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var kn=function(){function t(r){var e=this;_n(this,t),P(this,"hooks",mt({dropTarget:function(a,i){e.clearDropTarget(),e.dropTargetOptions=i,se(a)?e.dropTargetRef=a:e.dropTargetNode=a,e.reconnect()}})),P(this,"handlerId",null),P(this,"dropTargetRef",null),P(this,"dropTargetNode",void 0),P(this,"dropTargetOptionsInternal",null),P(this,"unsubscribeDropTarget",void 0),P(this,"lastConnectedHandlerId",null),P(this,"lastConnectedDropTarget",null),P(this,"lastConnectedDropTargetOptions",null),P(this,"backend",void 0),this.backend=r}return Pn(t,[{key:"connectTarget",get:function(){return this.dropTarget}},{key:"reconnect",value:function(){var e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();var n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}},{key:"receiveHandlerId",value:function(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}},{key:"dropTargetOptions",get:function(){return this.dropTargetOptionsInternal},set:function(e){this.dropTargetOptionsInternal=e}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didDropTargetChange",value:function(){return this.lastConnectedDropTarget!==this.dropTarget}},{key:"didOptionsChange",value:function(){return!ce(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}},{key:"disconnectDropTarget",value:function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}},{key:"dropTarget",get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}},{key:"clearDropTarget",value:function(){this.dropTargetRef=null,this.dropTargetNode=null}}]),t}();function xn(t,r,e){var n=e.getRegistry(),a=n.addTarget(t,r);return[a,function(){return n.removeTarget(a)}]}function Nn(t,r,e){var n=e.getRegistry(),a=n.addSource(t,r);return[a,function(){return n.removeSource(a)}]}var N=typeof window<"u"?h.useLayoutEffect:h.useEffect;function Y(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Y=function(e){return typeof e}:Y=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(t)}function Rn(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function We(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Mn(t,r,e){return r&&We(t.prototype,r),e&&We(t,e),t}function re(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var An=function(){function t(r,e,n){Rn(this,t),re(this,"spec",void 0),re(this,"monitor",void 0),re(this,"connector",void 0),this.spec=r,this.monitor=e,this.connector=n}return Mn(t,[{key:"beginDrag",value:function(){var e,n=this.spec,a=this.monitor,i=null;return Y(n.item)==="object"?i=n.item:typeof n.item=="function"?i=n.item(a):i={},(e=i)!==null&&e!==void 0?e:null}},{key:"canDrag",value:function(){var e=this.spec,n=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(n):!0}},{key:"isDragging",value:function(e,n){var a=this.spec,i=this.monitor,o=a.isDragging;return o?o(i):n===e.getSourceId()}},{key:"endDrag",value:function(){var e=this.spec,n=this.monitor,a=this.connector,i=e.end;i&&i(n.getItem(),n),a.reconnect()}}]),t}();function $n(t,r,e){var n=h.useMemo(function(){return new An(t,r,e)},[r,e]);return h.useEffect(function(){n.spec=t},[t]),n}function $(){var t=h.useContext(ft),r=t.dragDropManager;return f(r!=null,"Expected drag drop context"),r}function jn(t){return h.useMemo(function(){var r=t.type;return f(r!=null,"spec.type must be defined"),r},[t])}function Ln(t,r){return qn(t)||Un(t,r)||Fn(t,r)||Hn()}function Hn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fn(t,r){if(t){if(typeof t=="string")return Ye(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ye(t,r)}}function Ye(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function Un(t,r){var e=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(e!=null){var n=[],a=!0,i=!1,o,u;try{for(e=e.call(t);!(a=(o=e.next()).done)&&(n.push(o.value),!(r&&n.length===r));a=!0);}catch(s){i=!0,u=s}finally{try{!a&&e.return!=null&&e.return()}finally{if(i)throw u}}return n}}function qn(t){if(Array.isArray(t))return t}function Gn(t,r,e){var n=$(),a=$n(t,r,e),i=jn(t);N(function(){if(i!=null){var u=Nn(i,a,n),s=Ln(u,2),c=s[0],l=s[1];return r.receiveHandlerId(c),e.receiveHandlerId(c),l}},[n,r,e,a,i])}function Xn(t){return zn(t)||Vn(t)||Yn(t)||Wn()}function Wn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yn(t,r){if(t){if(typeof t=="string")return le(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return le(t,r)}}function Vn(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zn(t){if(Array.isArray(t))return le(t)}function le(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function bt(t,r){var e=Xn(r||[]);return r==null&&typeof t!="function"&&e.push(t),h.useMemo(function(){return typeof t=="function"?t():t},e)}function Bn(){var t=$();return h.useMemo(function(){return new mn(t)},[t])}function Kn(t,r){var e=$(),n=h.useMemo(function(){return new En(e.getBackend())},[e]);return N(function(){return n.dragSourceOptions=t||null,n.reconnect(),function(){return n.disconnectDragSource()}},[n,t]),N(function(){return n.dragPreviewOptions=r||null,n.reconnect(),function(){return n.disconnectDragPreview()}},[n,r]),n}function Qn(t,r){return ta(t)||ea(t,r)||Zn(t,r)||Jn()}function Jn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zn(t,r){if(t){if(typeof t=="string")return Ve(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ve(t,r)}}function Ve(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function ea(t,r){var e=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(e!=null){var n=[],a=!0,i=!1,o,u;try{for(e=e.call(t);!(a=(o=e.next()).done)&&(n.push(o.value),!(r&&n.length===r));a=!0);}catch(s){i=!0,u=s}finally{try{!a&&e.return!=null&&e.return()}finally{if(i)throw u}}return n}}function ta(t){if(Array.isArray(t))return t}function ra(t,r,e){var n=h.useState(function(){return r(t)}),a=Qn(n,2),i=a[0],o=a[1],u=h.useCallback(function(){var s=r(t);Rt(i,s)||(o(s),e&&e())},[i,t,e]);return N(u),[i,u]}function na(t,r){return ua(t)||oa(t,r)||ia(t,r)||aa()}function aa(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ia(t,r){if(t){if(typeof t=="string")return ze(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ze(t,r)}}function ze(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function oa(t,r){var e=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(e!=null){var n=[],a=!0,i=!1,o,u;try{for(e=e.call(t);!(a=(o=e.next()).done)&&(n.push(o.value),!(r&&n.length===r));a=!0);}catch(s){i=!0,u=s}finally{try{!a&&e.return!=null&&e.return()}finally{if(i)throw u}}return n}}function ua(t){if(Array.isArray(t))return t}function sa(t,r,e){var n=ra(t,r,e),a=na(n,2),i=a[0],o=a[1];return N(function(){var s=t.getHandlerId();if(s!=null)return t.subscribeToStateChange(o,{handlerIds:[s]})},[t,o]),i}function Dt(t,r,e){return sa(r,t||function(){return{}},function(){return e.reconnect()})}function ca(t){return h.useMemo(function(){return t.hooks.dragSource()},[t])}function la(t){return h.useMemo(function(){return t.hooks.dragPreview()},[t])}function fa(t,r){var e=bt(t,r);f(!e.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");var n=Bn(),a=Kn(e.options,e.previewOptions);return Gn(e,n,a),[Dt(e.collect,n,a),ca(a),la(a)]}function da(t){var r=t.accept;return h.useMemo(function(){return f(t.accept!=null,"accept must be defined"),Array.isArray(r)?r:[r]},[r])}function ga(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Be(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ha(t,r,e){return r&&Be(t.prototype,r),e&&Be(t,e),t}function Ke(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var va=function(){function t(r,e){ga(this,t),Ke(this,"spec",void 0),Ke(this,"monitor",void 0),this.spec=r,this.monitor=e}return ha(t,[{key:"canDrop",value:function(){var e=this.spec,n=this.monitor;return e.canDrop?e.canDrop(n.getItem(),n):!0}},{key:"hover",value:function(){var e=this.spec,n=this.monitor;e.hover&&e.hover(n.getItem(),n)}},{key:"drop",value:function(){var e=this.spec,n=this.monitor;if(e.drop)return e.drop(n.getItem(),n)}}]),t}();function pa(t,r){var e=h.useMemo(function(){return new va(t,r)},[r]);return h.useEffect(function(){e.spec=t},[t]),e}function ya(t,r){return Oa(t)||Da(t,r)||ba(t,r)||ma()}function ma(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ba(t,r){if(t){if(typeof t=="string")return Qe(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Qe(t,r)}}function Qe(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function Da(t,r){var e=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(e!=null){var n=[],a=!0,i=!1,o,u;try{for(e=e.call(t);!(a=(o=e.next()).done)&&(n.push(o.value),!(r&&n.length===r));a=!0);}catch(s){i=!0,u=s}finally{try{!a&&e.return!=null&&e.return()}finally{if(i)throw u}}return n}}function Oa(t){if(Array.isArray(t))return t}function Sa(t,r,e){var n=$(),a=pa(t,r),i=da(t);N(function(){var u=xn(i,a,n),s=ya(u,2),c=s[0],l=s[1];return r.receiveHandlerId(c),e.receiveHandlerId(c),l},[n,r,a,e,i.map(function(o){return o.toString()}).join("|")])}function Ta(){var t=$();return h.useMemo(function(){return new On(t)},[t])}function Ia(t){var r=$(),e=h.useMemo(function(){return new kn(r.getBackend())},[r]);return N(function(){return e.dropTargetOptions=t||null,e.reconnect(),function(){return e.disconnectDropTarget()}},[t]),e}function wa(t){return h.useMemo(function(){return t.hooks.dropTarget()},[t])}function Ca(t,r){var e=bt(t,r),n=Ta(),a=Ia(e.options);return Sa(e,n,a),[Dt(e.collect,n,a),wa(a)]}function Ot(t){var r=null,e=function(){return r==null&&(r=t()),r};return e}function Ea(t,r){return t.filter(function(e){return e!==r})}function _a(t,r){var e=new Set,n=function(o){return e.add(o)};t.forEach(n),r.forEach(n);var a=[];return e.forEach(function(i){return a.push(i)}),a}function Pa(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Je(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ka(t,r,e){return r&&Je(t.prototype,r),e&&Je(t,e),t}function Ze(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var xa=function(){function t(r){Pa(this,t),Ze(this,"entered",[]),Ze(this,"isNodeInDocument",void 0),this.isNodeInDocument=r}return ka(t,[{key:"enter",value:function(e){var n=this,a=this.entered.length,i=function(u){return n.isNodeInDocument(u)&&(!u.contains||u.contains(e))};return this.entered=_a(this.entered.filter(i),[e]),a===0&&this.entered.length>0}},{key:"leave",value:function(e){var n=this.entered.length;return this.entered=Ea(this.entered.filter(this.isNodeInDocument),e),n>0&&this.entered.length===0}},{key:"reset",value:function(){this.entered=[]}}]),t}(),Na=Ot(function(){return/firefox/i.test(navigator.userAgent)}),St=Ot(function(){return!!window.safari});function Ra(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function et(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ma(t,r,e){return r&&et(t.prototype,r),e&&et(t,e),t}function L(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var tt=function(){function t(r,e){Ra(this,t),L(this,"xs",void 0),L(this,"ys",void 0),L(this,"c1s",void 0),L(this,"c2s",void 0),L(this,"c3s",void 0);for(var n=r.length,a=[],i=0;i<n;i++)a.push(i);a.sort(function(H,_t){return r[H]<r[_t]?-1:1});for(var o=[],u=[],s,c,l=0;l<n-1;l++)s=r[l+1]-r[l],c=e[l+1]-e[l],o.push(s),u.push(c/s);for(var g=[u[0]],m=0;m<o.length-1;m++){var y=u[m],O=u[m+1];if(y*O<=0)g.push(0);else{s=o[m];var w=o[m+1],p=s+w;g.push(3*p/((p+w)/y+(p+s)/O))}}g.push(u[u.length-1]);for(var b=[],T=[],S,D=0;D<g.length-1;D++){S=u[D];var _=g[D],k=1/o[D],x=_+g[D+1]-S-S;b.push((S-_-x)*k),T.push(x*k*k)}this.xs=r,this.ys=e,this.c1s=g,this.c2s=b,this.c3s=T}return Ma(t,[{key:"interpolate",value:function(e){var n=this.xs,a=this.ys,i=this.c1s,o=this.c2s,u=this.c3s,s=n.length-1;if(e===n[s])return a[s];for(var c=0,l=u.length-1,g;c<=l;){g=Math.floor(.5*(c+l));var m=n[g];if(m<e)c=g+1;else if(m>e)l=g-1;else return a[g]}s=Math.max(0,l);var y=e-n[s],O=y*y;return a[s]+i[s]*y+o[s]*O+u[s]*y*O}}]),t}(),Aa=1;function Tt(t){var r=t.nodeType===Aa?t:t.parentElement;if(!r)return null;var e=r.getBoundingClientRect(),n=e.top,a=e.left;return{x:a,y:n}}function F(t){return{x:t.clientX,y:t.clientY}}function $a(t){var r;return t.nodeName==="IMG"&&(Na()||!((r=document.documentElement)!==null&&r!==void 0&&r.contains(t)))}function ja(t,r,e,n){var a=t?r.width:e,i=t?r.height:n;return St()&&t&&(i/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:i}}function La(t,r,e,n,a){var i=$a(r),o=i?t:r,u=Tt(o),s={x:e.x-u.x,y:e.y-u.y},c=t.offsetWidth,l=t.offsetHeight,g=n.anchorX,m=n.anchorY,y=ja(i,r,c,l),O=y.dragPreviewWidth,w=y.dragPreviewHeight,p=function(){var x=new tt([0,.5,1],[s.y,s.y/l*w,s.y+w-l]),H=x.interpolate(m);return St()&&i&&(H+=(window.devicePixelRatio-1)*w),H},b=function(){var x=new tt([0,.5,1],[s.x,s.x/c*O,s.x+O-c]);return x.interpolate(g)},T=a.offsetX,S=a.offsetY,D=T===0||T,_=S===0||S;return{x:D?T:b(),y:_?S:p()}}var It="__NATIVE_FILE__",wt="__NATIVE_URL__",Ct="__NATIVE_TEXT__",Et="__NATIVE_HTML__";const rt=Object.freeze(Object.defineProperty({__proto__:null,FILE:It,HTML:Et,TEXT:Ct,URL:wt},Symbol.toStringTag,{value:"Module"}));function ne(t,r,e){var n=r.reduce(function(a,i){return a||t.getData(i)},"");return n??e}var A;function U(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var fe=(A={},U(A,It,{exposeProperties:{files:function(r){return Array.prototype.slice.call(r.files)},items:function(r){return r.items},dataTransfer:function(r){return r}},matchesTypes:["Files"]}),U(A,Et,{exposeProperties:{html:function(r,e){return ne(r,e,"")},dataTransfer:function(r){return r}},matchesTypes:["Html","text/html"]}),U(A,wt,{exposeProperties:{urls:function(r,e){return ne(r,e,"").split(`
`)},dataTransfer:function(r){return r}},matchesTypes:["Url","text/uri-list"]}),U(A,Ct,{exposeProperties:{text:function(r,e){return ne(r,e,"")},dataTransfer:function(r){return r}},matchesTypes:["Text","text/plain"]}),A);function Ha(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function nt(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Fa(t,r,e){return r&&nt(t.prototype,r),e&&nt(t,e),t}function at(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var Ua=function(){function t(r){Ha(this,t),at(this,"item",void 0),at(this,"config",void 0),this.config=r,this.item={},this.initializeExposedProperties()}return Fa(t,[{key:"initializeExposedProperties",value:function(){var e=this;Object.keys(this.config.exposeProperties).forEach(function(n){Object.defineProperty(e.item,n,{configurable:!0,enumerable:!0,get:function(){return console.warn(`Browser doesn't allow reading "`.concat(n,'" until the drop event.')),null}})})}},{key:"loadDataTransfer",value:function(e){var n=this;if(e){var a={};Object.keys(this.config.exposeProperties).forEach(function(i){a[i]={value:n.config.exposeProperties[i](e,n.config.matchesTypes),configurable:!0,enumerable:!0}}),Object.defineProperties(this.item,a)}}},{key:"canDrag",value:function(){return!0}},{key:"beginDrag",value:function(){return this.item}},{key:"isDragging",value:function(e,n){return n===e.getSourceId()}},{key:"endDrag",value:function(){}}]),t}();function qa(t,r){var e=new Ua(fe[t]);return e.loadDataTransfer(r),e}function ae(t){if(!t)return null;var r=Array.prototype.slice.call(t.types||[]);return Object.keys(fe).filter(function(e){var n=fe[e].matchesTypes;return n.some(function(a){return r.indexOf(a)>-1})})[0]||null}function Ga(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function it(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Xa(t,r,e){return r&&it(t.prototype,r),e&&it(t,e),t}function ie(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var Wa=function(){function t(r,e){Ga(this,t),ie(this,"ownerDocument",null),ie(this,"globalContext",void 0),ie(this,"optionsArgs",void 0),this.globalContext=r,this.optionsArgs=e}return Xa(t,[{key:"window",get:function(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}},{key:"document",get:function(){var e;return(e=this.globalContext)!==null&&e!==void 0&&e.document?this.globalContext.document:this.window?this.window.document:void 0}},{key:"rootElement",get:function(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}}]),t}();function ot(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,n)}return e}function ut(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?ot(Object(e),!0).forEach(function(n){d(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):ot(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Ya(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function st(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Va(t,r,e){return r&&st(t.prototype,r),e&&st(t,e),t}function d(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var za=function(){function t(r,e,n){var a=this;Ya(this,t),d(this,"options",void 0),d(this,"actions",void 0),d(this,"monitor",void 0),d(this,"registry",void 0),d(this,"enterLeaveCounter",void 0),d(this,"sourcePreviewNodes",new Map),d(this,"sourcePreviewNodeOptions",new Map),d(this,"sourceNodes",new Map),d(this,"sourceNodeOptions",new Map),d(this,"dragStartSourceIds",null),d(this,"dropTargetIds",[]),d(this,"dragEnterTargetIds",[]),d(this,"currentNativeSource",null),d(this,"currentNativeHandle",null),d(this,"currentDragSourceNode",null),d(this,"altKeyPressed",!1),d(this,"mouseMoveTimeoutTimer",null),d(this,"asyncEndDragFrameId",null),d(this,"dragOverTargetIds",null),d(this,"lastClientOffset",null),d(this,"hoverRafId",null),d(this,"getSourceClientOffset",function(i){var o=a.sourceNodes.get(i);return o&&Tt(o)||null}),d(this,"endDragNativeItem",function(){a.isDraggingNativeItem()&&(a.actions.endDrag(),a.currentNativeHandle&&a.registry.removeSource(a.currentNativeHandle),a.currentNativeHandle=null,a.currentNativeSource=null)}),d(this,"isNodeInDocument",function(i){return!!(i&&a.document&&a.document.body&&a.document.body.contains(i))}),d(this,"endDragIfSourceWasRemovedFromDOM",function(){var i=a.currentDragSourceNode;i==null||a.isNodeInDocument(i)||a.clearCurrentDragSourceNode()&&a.monitor.isDragging()&&a.actions.endDrag()}),d(this,"handleTopDragStartCapture",function(){a.clearCurrentDragSourceNode(),a.dragStartSourceIds=[]}),d(this,"handleTopDragStart",function(i){if(!i.defaultPrevented){var o=a.dragStartSourceIds;a.dragStartSourceIds=null;var u=F(i);a.monitor.isDragging()&&a.actions.endDrag(),a.actions.beginDrag(o||[],{publishSource:!1,getSourceClientOffset:a.getSourceClientOffset,clientOffset:u});var s=i.dataTransfer,c=ae(s);if(a.monitor.isDragging()){if(s&&typeof s.setDragImage=="function"){var l=a.monitor.getSourceId(),g=a.sourceNodes.get(l),m=a.sourcePreviewNodes.get(l)||g;if(m){var y=a.getCurrentSourcePreviewNodeOptions(),O=y.anchorX,w=y.anchorY,p=y.offsetX,b=y.offsetY,T={anchorX:O,anchorY:w},S={offsetX:p,offsetY:b},D=La(g,m,u,T,S);s.setDragImage(m,D.x,D.y)}}try{s==null||s.setData("application/json",{})}catch{}a.setCurrentDragSourceNode(i.target);var _=a.getCurrentSourcePreviewNodeOptions(),k=_.captureDraggingState;k?a.actions.publishDragSource():setTimeout(function(){return a.actions.publishDragSource()},0)}else if(c)a.beginDragNativeItem(c);else{if(s&&!s.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}}}),d(this,"handleTopDragEndCapture",function(){a.clearCurrentDragSourceNode()&&a.monitor.isDragging()&&a.actions.endDrag()}),d(this,"handleTopDragEnterCapture",function(i){a.dragEnterTargetIds=[];var o=a.enterLeaveCounter.enter(i.target);if(!(!o||a.monitor.isDragging())){var u=i.dataTransfer,s=ae(u);s&&a.beginDragNativeItem(s,u)}}),d(this,"handleTopDragEnter",function(i){var o=a.dragEnterTargetIds;if(a.dragEnterTargetIds=[],!!a.monitor.isDragging()){a.altKeyPressed=i.altKey,o.length>0&&a.actions.hover(o,{clientOffset:F(i)});var u=o.some(function(s){return a.monitor.canDropOnTarget(s)});u&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=a.getCurrentDropEffect()))}}),d(this,"handleTopDragOverCapture",function(){a.dragOverTargetIds=[]}),d(this,"handleTopDragOver",function(i){var o=a.dragOverTargetIds;if(a.dragOverTargetIds=[],!a.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}a.altKeyPressed=i.altKey,a.lastClientOffset=F(i),a.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(a.hoverRafId=requestAnimationFrame(function(){a.monitor.isDragging()&&a.actions.hover(o||[],{clientOffset:a.lastClientOffset}),a.hoverRafId=null}));var u=(o||[]).some(function(s){return a.monitor.canDropOnTarget(s)});u?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=a.getCurrentDropEffect())):a.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))}),d(this,"handleTopDragLeaveCapture",function(i){a.isDraggingNativeItem()&&i.preventDefault();var o=a.enterLeaveCounter.leave(i.target);o&&a.isDraggingNativeItem()&&setTimeout(function(){return a.endDragNativeItem()},0)}),d(this,"handleTopDropCapture",function(i){if(a.dropTargetIds=[],a.isDraggingNativeItem()){var o;i.preventDefault(),(o=a.currentNativeSource)===null||o===void 0||o.loadDataTransfer(i.dataTransfer)}else ae(i.dataTransfer)&&i.preventDefault();a.enterLeaveCounter.reset()}),d(this,"handleTopDrop",function(i){var o=a.dropTargetIds;a.dropTargetIds=[],a.actions.hover(o,{clientOffset:F(i)}),a.actions.drop({dropEffect:a.getCurrentDropEffect()}),a.isDraggingNativeItem()?a.endDragNativeItem():a.monitor.isDragging()&&a.actions.endDrag()}),d(this,"handleSelectStart",function(i){var o=i.target;typeof o.dragDrop=="function"&&(o.tagName==="INPUT"||o.tagName==="SELECT"||o.tagName==="TEXTAREA"||o.isContentEditable||(i.preventDefault(),o.dragDrop()))}),this.options=new Wa(e,n),this.actions=r.getActions(),this.monitor=r.getMonitor(),this.registry=r.getRegistry(),this.enterLeaveCounter=new xa(this.isNodeInDocument)}return Va(t,[{key:"profile",value:function(){var e,n;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((n=this.dragOverTargetIds)===null||n===void 0?void 0:n.length)||0}}},{key:"window",get:function(){return this.options.window}},{key:"document",get:function(){return this.options.document}},{key:"rootElement",get:function(){return this.options.rootElement}},{key:"setup",value:function(){var e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}},{key:"teardown",value:function(){var e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var n;(n=this.window)===null||n===void 0||n.cancelAnimationFrame(this.asyncEndDragFrameId)}}},{key:"connectDragPreview",value:function(e,n,a){var i=this;return this.sourcePreviewNodeOptions.set(e,a),this.sourcePreviewNodes.set(e,n),function(){i.sourcePreviewNodes.delete(e),i.sourcePreviewNodeOptions.delete(e)}}},{key:"connectDragSource",value:function(e,n,a){var i=this;this.sourceNodes.set(e,n),this.sourceNodeOptions.set(e,a);var o=function(c){return i.handleDragStart(c,e)},u=function(c){return i.handleSelectStart(c)};return n.setAttribute("draggable","true"),n.addEventListener("dragstart",o),n.addEventListener("selectstart",u),function(){i.sourceNodes.delete(e),i.sourceNodeOptions.delete(e),n.removeEventListener("dragstart",o),n.removeEventListener("selectstart",u),n.setAttribute("draggable","false")}}},{key:"connectDropTarget",value:function(e,n){var a=this,i=function(c){return a.handleDragEnter(c,e)},o=function(c){return a.handleDragOver(c,e)},u=function(c){return a.handleDrop(c,e)};return n.addEventListener("dragenter",i),n.addEventListener("dragover",o),n.addEventListener("drop",u),function(){n.removeEventListener("dragenter",i),n.removeEventListener("dragover",o),n.removeEventListener("drop",u)}}},{key:"addEventListeners",value:function(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"getCurrentSourceNodeOptions",value:function(){var e=this.monitor.getSourceId(),n=this.sourceNodeOptions.get(e);return ut({dropEffect:this.altKeyPressed?"copy":"move"},n||{})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var e=this.monitor.getSourceId(),n=this.sourcePreviewNodeOptions.get(e);return ut({anchorX:.5,anchorY:.5,captureDraggingState:!1},n||{})}},{key:"isDraggingNativeItem",value:function(){var e=this.monitor.getItemType();return Object.keys(rt).some(function(n){return rt[n]===e})}},{key:"beginDragNativeItem",value:function(e,n){this.clearCurrentDragSourceNode(),this.currentNativeSource=qa(e,n),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:"setCurrentDragSourceNode",value:function(e){var n=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;var a=1e3;this.mouseMoveTimeoutTimer=setTimeout(function(){var i;return(i=n.rootElement)===null||i===void 0?void 0:i.addEventListener("mousemove",n.endDragIfSourceWasRemovedFromDOM,!0)},a)}},{key:"clearCurrentDragSourceNode",value:function(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}},{key:"handleDragStart",value:function(e,n){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(n))}},{key:"handleDragEnter",value:function(e,n){this.dragEnterTargetIds.unshift(n)}},{key:"handleDragOver",value:function(e,n){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(n)}},{key:"handleDrop",value:function(e,n){this.dropTargetIds.unshift(n)}}]),t}(),Ba=function(r,e,n){return new za(r,e,n)};const ct={CARD:"card"},Ka=({id:t,image:r,index:e,moveCard:n,handleRemoveImage:a})=>{const i=h.useRef(null),[{handlerId:o},u]=Ca({accept:ct.CARD,collect(c){return{handlerId:c.getHandlerId()}},hover(c,l){var b;if(!i.current)return;const g=c.index,m=e;if(g===m)return;const y=(b=i.current)==null?void 0:b.getBoundingClientRect(),O=(y.bottom-y.top)/2,p=l.getClientOffset().y-y.top;g<m&&p<O||g>m&&p>O||(n(g,m),c.index=m)}}),[{},s]=fa({type:ct.CARD,item:()=>({id:t,index:e}),collect:c=>({isDragging:c.isDragging()})});return s(u(i)),v.jsx("div",{ref:i,"data-handler-id":o,children:v.jsxs("div",{className:"relative",children:[v.jsx("img",{className:"inline-flex border rounded-md border-gray-100 dark:border-gray-600 w-24 max-h-24 p-2 m-2",src:r,alt:"product"}),e===0&&v.jsx("p",{className:"text-xs absolute py-1 w-full bottom-0 inset-x-0 bg-blue-500 rounded-full text-white text-center ",children:"Default Image"}),v.jsx("button",{type:"button",className:"absolute top-0 right-0 text-red-500 focus:outline-none",onClick:()=>a(r),children:v.jsx(lt,{})})]})})},Qa=({setImageUrl:t,imageUrl:r,handleRemoveImage:e})=>{const n=h.useCallback((i,o)=>{t(u=>jt(u,{$splice:[[i,1],[o,0,u[i]]]}))},[t]),a=h.useCallback((i,o)=>v.jsx(Ka,{index:o,id:i.id,text:i.text,moveCard:n,image:i,handleRemoveImage:e},o+1),[n,e]);return v.jsx(v.Fragment,{children:r.map((i,o)=>a(i,o))})},oi=({setImageUrl:t,imageUrl:r,product:e,folder:n})=>{const[a,i]=h.useState([]),[o,u]=h.useState(!1),[s,c]=h.useState(""),{data:l}=Mt(At.getGlobalSetting),{getRootProps:g,getInputProps:m,fileRejections:y}=xt({accept:{"image/*":[".jpeg",".jpg",".png",".webp"]},multiple:!!e,maxSize:5e5,maxFiles:(l==null?void 0:l.number_of_image_per_product)||2,onDrop:p=>{i(p.map(b=>Object.assign(b,{preview:URL.createObjectURL(b)})))}});h.useEffect(()=>{y&&y.map(({file:p,errors:b})=>v.jsxs("li",{children:[p.path," - ",p.size," bytes",v.jsx("ul",{children:b.map(T=>v.jsx("li",{children:T.code==="too-many-files"?R(`Maximum ${l==null?void 0:l.number_of_image_per_product} Image Can be Upload!`):R(T.message)},T.code))})]},p.path)),a&&a.forEach(p=>{if(e&&(r==null?void 0:r.length)+(a==null?void 0:a.length)>(l==null?void 0:l.number_of_image_per_product))return R(`Maximum ${l==null?void 0:l.number_of_image_per_product} Image Can be Upload!`);if(u(!0),c("Uploading...."),e&&(r==null?void 0:r.find(_=>_==="cloudinary://314266757694813:7NXGy9Xy8N3haExWyd3v9i9PVb0@drq6x5azk")))return u(!1);const b=p.name.replaceAll(/\s/g,""),T=b==null?void 0:b.substring(0,b.lastIndexOf(".")),S=new FormData;S.append("file",p),S.append("upload_preset","drq6x5azk"),S.append("cloud_name","your_cloudinary_cloud_name"),S.append("folder",n),S.append("public_id",T),kt({url:"cloudinary://314266757694813:7NXGy9Xy8N3haExWyd3v9i9PVb0@drq6x5azk",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:S}).then(D=>{$t("Image Uploaded successfully!"),u(!1),t(e?_=>[..._,D.data.secure_url]:D.data.secure_url)}).catch(D=>{console.error("err",D),R(D.Message),u(!1)})})},[a]);const O=a.map(p=>v.jsx("div",{children:v.jsx("div",{children:v.jsx("img",{className:"inline-flex border-2 border-gray-100 w-24 max-h-24",src:p.preview,alt:p.name})})},p.name));h.useEffect(()=>()=>{a.forEach(p=>URL.revokeObjectURL(p.preview))},[a]);const w=async p=>{try{if(u(!1),R("Image delete successfully!"),e){const b=r==null?void 0:r.filter(T=>T!==p);t(b)}else t("")}catch(b){console.error("err",b),R(b.Message),u(!1)}};return v.jsxs("div",{className:"w-full text-center",children:[v.jsxs("div",{className:"border-2 border-gray-300 dark:border-gray-600 border-dashed rounded-md cursor-pointer px-6 pt-5 pb-6",...g(),children:[v.jsx("input",{...m()}),v.jsx("span",{className:"mx-auto flex justify-center",children:v.jsx(Nt,{className:"text-3xl text-emerald-500"})}),v.jsx("p",{className:"text-sm mt-2",children:me("DragYourImage")}),v.jsx("em",{className:"text-xs text-gray-400",children:me("imageFormat")})]}),v.jsx("div",{className:"text-emerald-500",children:o&&s}),v.jsx("aside",{className:"flex flex-row flex-wrap mt-4",children:e?v.jsx(gn,{backend:Ba,children:v.jsx(Qa,{setImageUrl:t,imageUrl:r,handleRemoveImage:w})}):!e&&r?v.jsxs("div",{className:"relative",children:[" ",v.jsx("img",{className:"inline-flex border rounded-md border-gray-100 dark:border-gray-600 w-24 max-h-24 p-2",src:r,alt:"product"}),v.jsx("button",{type:"button",className:"absolute top-0 right-0 text-red-500 focus:outline-none",onClick:()=>w(r),children:v.jsx(lt,{})})]}):O})]})};export{oi as U};
