import{u as f,j as e,d as l,r as N,A as D,S as P}from"./index-bXf7bkfr.js";import{l as R,f as k}from"./Layout-ruJfPJtj.js";import{u as E}from"./useAsync-diBcFnqK.js";import{u as F}from"./useFilter-e3DUymki.js";import{T as w,D as B,u as I,M as S}from"./DrawerButton-lg5Ps63C.js";import{E as g}from"./Error-PIHhCkC5.js";import{I as b}from"./InputArea-0d0LcQwn.js";import{u as U}from"./useStaffSubmit-H6JHVPxM.js";import{S as z}from"./SelectRole-UlwpEEma.js";import{L as o}from"./LabelArea-yLMcEKwy.js";import{U as Z}from"./Uploader-_dg8e2rR.js";import{T as L}from"./TableLoading-tWsXKphU.js";import{S as J}from"./Status-yEO606rK.js";import{u as M}from"./useUtilsFunction-x7MTCbnv.js";import{D as _,E as $}from"./EditDeleteButton-eekdXM9q.js";import{A as O}from"./ActiveInActiveButton-Ea4Er-ZK.js";import{N as V}from"./NotFound-dePuPwWH.js";import{P as q}from"./PageTitle-ag3IXuSt.js";import{A as H}from"./AdminServices-B80tspSM.js";import"./iconBase-FliByv4u.js";import"./httpService-79bAftQe.js";import"./ProductServices-Gd1CbPQ6.js";import"./index-cxPaO_Qc.js";import"./LanguageServices-AJcmbBg5.js";import"./toast-J_gpu8Z1.js";import"./SelectLanguageTwo-nmb2k5AQ.js";import"./spinner-R50PTWTV.js";import"./index.esm-3tbPwPzp.js";import"./index-GVm8oTZ5.js";import"./tslib.es6-YYMLUA4o.js";import"./SettingServices-beCL0PQm.js";import"./index-2hvPrymD.js";import"./useDispatch--MV0V2w_.js";import"./UserServices-_gsJi_DW.js";import"./Tooltip-Sv8x7z5D.js";import"./index.prod-ZV7SGkYB.js";const T=({id:t})=>{const{register:r,handleSubmit:h,onSubmit:d,errors:i,imageUrl:j,setImageUrl:m,isSubmitting:c,selectedDate:x,setSelectedDate:p,handleSelectLanguage:a}=U(t),{t:n}=f();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:t?e.jsx(w,{register:r,title:n("UpdateStaff"),description:n("UpdateStaffdescription")}):e.jsx(w,{register:r,title:n("AddStaffTitle"),description:n("AddStaffdescription")})}),e.jsx(R.Scrollbars,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:e.jsx(l.Card,{className:"overflow-y-scroll flex-grow scrollbar-hide w-full max-h-full",children:e.jsx(l.CardBody,{children:e.jsxs("form",{onSubmit:h(d),children:[e.jsxs("div",{className:"px-6 pt-8 flex-grow scrollbar-hide w-full max-h-full pb-40",children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(o,{label:"Staff Image"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(Z,{imageUrl:j,setImageUrl:m,folder:"admin"})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(o,{label:"Name"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(b,{register:r,label:"Name",name:"name",type:"text",autoComplete:"username",placeholder:"Staff name"}),e.jsx(g,{errorName:i.name})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(o,{label:"Email"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(b,{register:r,label:"Email",name:"email",type:"text",autoComplete:"username",pattern:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,placeholder:"Email"}),e.jsx(g,{errorName:i.email})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(o,{label:"Password"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[t?e.jsx(b,{required:!0,register:r,label:"Password",name:"password",type:"password",autoComplete:"current-password",placeholder:"Password"}):e.jsx(b,{register:r,label:"Password",name:"password",type:"password",autoComplete:"current-password",placeholder:"Password"}),e.jsx(g,{errorName:i.password})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(o,{label:"Contact Number"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(b,{register:r,label:"Contact Number",name:"phone",pattern:/^[+]?\d*$/,minLength:6,maxLength:15,type:"text",placeholder:"Phone number"}),e.jsx(g,{errorName:i.phone})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(o,{label:"Joining Date"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(l.Input,{onChange:u=>p(u.target.value),label:"Joining Date",name:"joiningDate",value:x,type:"date",placeholder:n("StaffJoiningDate")}),e.jsx(g,{errorName:i.joiningDate})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(o,{label:"Staff Role"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(z,{register:r,label:"Role",name:"role"}),e.jsx(g,{errorName:i.role})]})]})]}),e.jsx(B,{id:t,title:"Staff",isSubmitting:c})]})})})})]})},G=({staffs:t,lang:r})=>{const{title:h,serviceId:d,handleModalOpen:i,handleUpdate:j,isSubmitting:m,handleResetPassword:c}=I(),{showDateFormat:x,showingTranslateValue:p}=M();return e.jsxs(e.Fragment,{children:[e.jsx(_,{id:d,title:h}),e.jsx(S,{children:e.jsx(T,{id:d})}),e.jsx(l.TableBody,{children:t==null?void 0:t.map(a=>e.jsxs(l.TableRow,{children:[e.jsx(l.TableCell,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(l.Avatar,{className:"hidden mr-3 md:block bg-gray-50",src:a.image,alt:"staff"}),e.jsx("div",{children:e.jsx("h2",{className:"text-sm font-medium",children:p(a==null?void 0:a.name)})})]})}),e.jsxs(l.TableCell,{children:[e.jsx("span",{className:"text-sm",children:a.email})," "]}),e.jsx(l.TableCell,{children:e.jsx("span",{className:"text-sm ",children:a.phone})}),e.jsx(l.TableCell,{children:e.jsx("span",{className:"text-sm",children:x(a.joiningData)})}),e.jsx(l.TableCell,{children:e.jsx("span",{className:"text-sm font-semibold",children:a==null?void 0:a.role})}),e.jsx(l.TableCell,{className:"text-center text-xs",children:e.jsx(J,{status:a.status})}),e.jsx(l.TableCell,{className:"text-center",children:e.jsx(O,{id:a==null?void 0:a._id,staff:a,option:"staff",status:a.status})}),e.jsx(l.TableCell,{children:e.jsx($,{id:a._id,staff:a,isSubmitting:m,handleUpdate:j,handleModalOpen:i,handleResetPassword:c,title:p(a==null?void 0:a.name)})})]},a._id))})]})},ke=()=>{const{state:t}=N.useContext(D),{adminInfo:r}=t,{toggleDrawer:h,lang:d}=N.useContext(P),{data:i,loading:j,error:m}=E(()=>H.getAllStaff({email:r.email})),{userRef:c,setRole:x,totalResults:p,resultsPerPage:a,dataTable:n,serviceData:u,handleChangePage:v,handleSubmitUser:C}=F(i),{t:s}=f(),y=()=>{x(""),c.current.value=""};return e.jsxs(e.Fragment,{children:[e.jsxs(q,{children:[s("StaffPageTitle")," "]}),e.jsx(S,{children:e.jsx(T,{})}),e.jsx(l.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsx(l.CardBody,{children:e.jsxs("form",{onSubmit:C,className:"py-3 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex",children:[e.jsxs("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:[e.jsx(l.Input,{ref:c,type:"search",name:"search",placeholder:s("StaffSearchBy")}),e.jsx("button",{type:"submit",className:"absolute right-0 top-0 mt-5 mr-1"})]}),e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsxs(l.Select,{onChange:A=>x(A.target.value),children:[e.jsx("option",{value:"All",defaultValue:!0,hidden:!0,children:s("StaffRole")}),e.jsx("option",{value:"Admin",children:s("StaffRoleAdmin")}),e.jsx("option",{value:"Cashier",children:s("SelectCashiers")}),e.jsx("option",{value:"Super Admin",children:s("SelectSuperAdmin")})]})}),e.jsx("div",{className:"w-full md:w-56 lg:w-56 xl:w-56",children:e.jsxs(l.Button,{onClick:h,className:"w-full rounded-md h-12",children:[e.jsx("span",{className:"mr-3",children:e.jsx(k,{})}),s("AddStaff")]})}),e.jsxs("div",{className:"mt-2 md:mt-0 flex items-center xl:gap-x-4 gap-x-1 flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:[e.jsx("div",{className:"w-full mx-1",children:e.jsx(l.Button,{type:"submit",className:"h-12 w-full bg-emerald-700",children:"Filter"})}),e.jsx("div",{className:"w-full",children:e.jsx(l.Button,{layout:"outline",onClick:y,type:"reset",className:"px-4 md:py-1 py-3 text-sm dark:bg-gray-700",children:e.jsx("span",{className:"text-black dark:text-gray-200",children:"Reset"})})})]})]})})}),j?e.jsx(L,{row:12,col:7,width:163,height:20}):m?e.jsx("span",{className:"text-center mx-auto text-red-500",children:m}):(u==null?void 0:u.length)!==0?e.jsxs(l.TableContainer,{className:"mb-8 rounded-b-lg",children:[e.jsxs(l.Table,{children:[e.jsx(l.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(l.TableCell,{children:s("StaffNameTbl")}),e.jsx(l.TableCell,{children:s("StaffEmailTbl")}),e.jsx(l.TableCell,{children:s("StaffContactTbl")}),e.jsx(l.TableCell,{children:s("StaffJoiningDateTbl")}),e.jsx(l.TableCell,{children:s("StaffRoleTbl")}),e.jsx(l.TableCell,{className:"text-center",children:s("OderStatusTbl")}),e.jsx(l.TableCell,{className:"text-center",children:s("PublishedTbl")}),e.jsx(l.TableCell,{className:"text-right",children:s("StaffActionsTbl")})]})}),e.jsx(G,{staffs:n,lang:d})]}),e.jsx(l.TableFooter,{children:e.jsx(l.Pagination,{totalResults:p,resultsPerPage:a,onChange:v,label:"Table navigation"})})]}):e.jsx(V,{title:"Sorry, There are no staff right now."})]})};export{ke as default};
