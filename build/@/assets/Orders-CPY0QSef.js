import{r as F,S as Q,u as X,j as e,d as t}from"./index-tXNXoeRs.js";import{p as Y}from"./Layout-7PXJC5ix.js";import{e as A}from"./exportFromJSON-YB29QCxh.js";import{a as Z}from"./toast-1_nHReMg.js";import{u as ee}from"./useAsync-mFMgt6Cb.js";import{u as te}from"./useFilter-8scIczCo.js";import{O as I}from"./OrderServices-yeySU2Fz.js";import{N as se}from"./NotFound-JukgDXWl.js";import{P as le}from"./PageTitle-jIYcOIh7.js";import{O as ae}from"./OrderTable-Fk96BxVH.js";import{T as re}from"./TableLoading-ACMK_2k4.js";import{s as ie}from"./spinner-R50PTWTV.js";import{u as ne}from"./useUtilsFunction-cpByHX2w.js";import"./iconBase-2BF9gXMP.js";import"./httpService-W4D8ylqE.js";import"./ProductServices-dm5sYQJF.js";import"./index-GA65FgQZ.js";import"./LanguageServices-fZF5pM4d.js";import"./Status-uURtc20f.js";import"./Tooltip-tbnP4Kxc.js";import"./index-1RNFUR5_.js";import"./SettingServices-U-Kr69tQ.js";import"./useDispatch-FcLvS5kM.js";const Re=()=>{var O,D,P,E;const{time:g,setTime:o,status:p,endDate:j,setStatus:c,setEndDate:b,startDate:v,currentPage:R,searchText:y,searchRef:f,method:C,setMethod:h,setStartDate:T,setSearchText:B,handleChangePage:M,handleSubmitForAll:V,resultsPerPage:N,locationRef:de,cityRef:_,stateRef:oe,setCity:ce,setState:he,setLocation:me,state:w,city:H,location:J}=F.useContext(Q),{t:a}=X(),[m,x]=F.useState(!1),{data:l,loading:U,error:S}=ee(()=>I.getAllOrders({day:g,method:C,status:p,page:R,endDate:j,startDate:v,limit:N,customerName:y,searchState:w})),{currency:W,getNumber:$,getNumberTwo:n}=ne(),{dataTable:q,serviceData:u}=te(l==null?void 0:l.orders),z=async()=>{var s,d,L;try{x(!0);const i=await I.getAllOrders({page:1,day:g,method:C,status:p,endDate:j,download:!0,startDate:v,limit:l==null?void 0:l.totalDoc,customerName:y,city:H,state:w,location:J}),K=(s=i==null?void 0:i.orders)==null?void 0:s.map(r=>{var k;return{_id:r._id,invoice:r.invoice,subTotal:n(r.subTotal),shippingCost:n(r.shippingCost),discount:n(r==null?void 0:r.discount),total:n(r.total),paymentMethod:r.paymentMethod,status:r.status,user_info:(k=r==null?void 0:r.user_info)==null?void 0:k.name,createdAt:r.createdAt,updatedAt:r.updatedAt}});A({data:K,fileName:"orders",exportType:A.types.csv}),x(!1)}catch(i){x(!1),Z(((L=(d=i==null?void 0:i.response)==null?void 0:d.data)==null?void 0:L.message)||(i==null?void 0:i.message))}},G=()=>{o(""),h(""),c(""),b(""),T(""),B(""),f.current.value=""};return e.jsxs(e.Fragment,{children:[e.jsx(le,{children:a("Orders")}),e.jsx(t.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsx(t.CardBody,{children:e.jsxs("form",{onSubmit:V,children:[e.jsxs("div",{className:"hidden grid gap-4 lg:gap-4 xl:gap-6 md:gap-2 md:grid-cols-5 py-2",children:[e.jsx("div",{children:e.jsx(t.Input,{ref:f,type:"search",name:"search",placeholder:"Search by Customer Name"})}),e.jsx("div",{children:e.jsxs(t.Select,{onChange:s=>c(s.target.value),children:[e.jsx("option",{value:"Status",defaultValue:!0,hidden:!0,children:a("Status")}),e.jsx("option",{value:"Delivered",children:a("PageOrderDelivered")}),e.jsx("option",{value:"Pending",children:a("PageOrderPending")}),e.jsx("option",{value:"Processing",children:a("PageOrderProcessing")}),e.jsx("option",{value:"Cancel",children:a("OrderCancel")})]})}),e.jsx("div",{children:e.jsxs(t.Select,{onChange:s=>o(s.target.value),children:[e.jsx("option",{value:"Order limits",defaultValue:!0,hidden:!0,children:a("Orderlimits")}),e.jsx("option",{value:"5",children:a("DaysOrders5")}),e.jsx("option",{value:"7",children:a("DaysOrders7")}),e.jsx("option",{value:"15",children:a("DaysOrders15")}),e.jsx("option",{value:"30",children:a("DaysOrders30")})]})}),e.jsx("div",{children:e.jsxs(t.Select,{onChange:s=>h(s.target.value),children:[e.jsx("option",{value:"Method",defaultValue:!0,hidden:!0,children:a("Method")}),e.jsx("option",{value:"Cash",children:a("Cash")}),e.jsx("option",{value:"Card",children:a("Card")}),e.jsx("option",{value:"Credit",children:a("Credit")})]})}),e.jsx("div",{children:m?e.jsxs(t.Button,{disabled:!0,type:"button",className:"h-12 w-full",children:[e.jsx("img",{src:ie,alt:"Loading",width:20,height:10})," ",e.jsx("span",{className:"font-serif ml-2 font-light",children:"Processing"})]}):e.jsxs("button",{onClick:z,disabled:((O=l==null?void 0:l.orders)==null?void 0:O.length)<=0||m,type:"button",className:`${(((D=l==null?void 0:l.orders)==null?void 0:D.length)<=0||m)&&"opacity-50 cursor-not-allowed bg-emerald-600"} flex items-center justify-center text-sm leading-5 h-12 w-full text-center transition-colors duration-150 font-medium px-6 py-2 rounded-md text-white bg-emerald-500 border border-transparent active:bg-emerald-600 hover:bg-emerald-600 `,children:["Download All Orders",e.jsx("span",{className:"ml-2 text-base",children:e.jsx(Y,{})})]})})]}),e.jsxs("div",{className:"grid gap-4 lg:gap-6 xl:gap-6 lg:grid-cols-3 xl:grid-cols-3 md:grid-cols-3 sm:grid-cols-1 py-2",children:[e.jsxs("div",{children:[e.jsx(t.Label,{children:"Order Status"}),e.jsxs(t.Select,{onChange:s=>c(s.target.value),children:[e.jsx("option",{value:"Status",defaultValue:!0,hidden:!0,children:a("Status")}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Ongoing",children:"Ongoing"}),e.jsx("option",{value:"Completed",children:"Completed"}),e.jsx("option",{value:"Cancel",children:"Cancel"})]})]}),e.jsxs("div",{children:[e.jsx(t.Label,{children:"Enter State"}),e.jsx("div",{children:e.jsx(t.Input,{onChange:s=>o(s.target.value),type:"search",name:"state",placeholder:"Search by State Name"})})]}),e.jsxs("div",{children:[e.jsx(t.Label,{children:"Enter City"}),e.jsx("div",{children:e.jsx(t.Input,{onChange:s=>h(s.target.value),ref:_,type:"text",name:"city",placeholder:"Search by City Name"})})]})]}),e.jsxs("div",{className:"grid gap-4 lg:gap-6 xl:gap-6 lg:grid-cols-3 xl:grid-cols-3 md:grid-cols-3 sm:grid-cols-1 py-2",children:[e.jsxs("div",{children:[e.jsx(t.Label,{children:"Start Date"}),e.jsx(t.Input,{type:"date",name:"startDate",onChange:s=>T(s.target.value)})]}),e.jsxs("div",{children:[e.jsx(t.Label,{children:"End Date"}),e.jsx(t.Input,{type:"date",name:"startDate",onChange:s=>b(s.target.value)})]}),e.jsxs("div",{className:"mt-2 md:mt-0 flex items-center xl:gap-x-4 gap-x-1 flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:[e.jsxs("div",{className:"w-full mx-1",children:[e.jsx(t.Label,{style:{visibility:"hidden"},children:"Filter"}),e.jsx(t.Button,{type:"submit",className:"h-12 w-full bg-emerald-700",children:"Filter"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(t.Label,{style:{visibility:"hidden"},children:"Reset"}),e.jsx(t.Button,{layout:"outline",onClick:G,type:"reset",className:"px-4 md:py-1 py-3 text-sm dark:bg-gray-700",children:e.jsx("span",{className:"text-black dark:text-gray-200",children:"Reset"})})]})]})]})]})})}),((P=l==null?void 0:l.methodTotals)==null?void 0:P.length)>0&&e.jsx(t.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 rounded-t-lg rounded-0 mb-4",children:e.jsx(t.CardBody,{children:e.jsx("div",{className:"flex gap-1",children:(E=l==null?void 0:l.methodTotals)==null?void 0:E.map((s,d)=>e.jsx("div",{className:"dark:text-gray-300",children:(s==null?void 0:s.method)&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"font-medium",children:[" ",s.method]})," :"," ",e.jsxs("span",{className:"font-semibold mr-2",children:[W,$(s.total)]})]})},d+1))})})}),U?e.jsx(re,{row:12,col:7,width:160,height:20}):S?e.jsx("span",{className:"text-center mx-auto text-red-500",children:S}):(u==null?void 0:u.length)!==0?e.jsxs(t.TableContainer,{className:"mb-8 dark:bg-gray-900",children:[e.jsxs(t.Table,{children:[e.jsx(t.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(t.TableCell,{children:"Order Id"}),e.jsx(t.TableCell,{children:"Working Hours"}),e.jsx(t.TableCell,{children:"Booked Payment"}),e.jsx(t.TableCell,{children:"Payment Status"}),e.jsx(t.TableCell,{children:"Date"}),e.jsx(t.TableCell,{children:"Start Time"}),e.jsx(t.TableCell,{children:"End Time"}),e.jsx(t.TableCell,{children:"Category"}),e.jsx(t.TableCell,{children:"Manpower"}),e.jsx(t.TableCell,{children:"Employer"}),e.jsx(t.TableCell,{children:a("ActionTbl")}),e.jsx(t.TableCell,{className:"text-right",children:a("InvoiceTbl")})]})}),e.jsx(ae,{orders:q})]}),e.jsx(t.TableFooter,{children:e.jsx(t.Pagination,{totalResults:l==null?void 0:l.totalDoc,resultsPerPage:N,onChange:M,label:"Table navigation"})})]}):e.jsx(se,{title:"Sorry, There are no orders right now."})]})};export{Re as default};
