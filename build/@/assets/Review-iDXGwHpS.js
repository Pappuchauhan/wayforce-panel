import{r as x,A as I,S as L,e as V,u as B,j as e,d as a}from"./index-bXf7bkfr.js";import{u as _}from"./useAsync-diBcFnqK.js";import{u as H}from"./useFilter-e3DUymki.js";import{T as A,D as w,u as z,M as F}from"./DrawerButton-lg5Ps63C.js";import{P as J}from"./PageDrawer-fQxeaAsI.js";import{T as K}from"./TableLoading-tWsXKphU.js";import"./index-cxPaO_Qc.js";import"./httpService-79bAftQe.js";import{R as y,D as Q,E as W}from"./EditDeleteButton-eekdXM9q.js";import"./Tooltip-Sv8x7z5D.js";import"./index.prod-ZV7SGkYB.js";import{n as P,a as E}from"./toast-J_gpu8Z1.js";import{N as X}from"./NotFound-dePuPwWH.js";import{P as Y}from"./PageTitle-ag3IXuSt.js";import{S as Z}from"./Status-yEO606rK.js";import{l as $}from"./Layout-ruJfPJtj.js";import{E as R}from"./Error-PIHhCkC5.js";import{I as v}from"./InputArea-0d0LcQwn.js";import{u as ee,C as se}from"./index.esm-3tbPwPzp.js";import{L as D}from"./LabelArea-yLMcEKwy.js";import"./index-2hvPrymD.js";import{T as ae}from"./TextAreaCom-aeaaayqM.js";import"./ProductServices-Gd1CbPQ6.js";import"./LanguageServices-AJcmbBg5.js";import"./useUtilsFunction-x7MTCbnv.js";import"./SettingServices-beCL0PQm.js";import"./useDispatch--MV0V2w_.js";import"./SelectLanguageTwo-nmb2k5AQ.js";import"./spinner-R50PTWTV.js";import"./AdminServices-B80tspSM.js";import"./UserServices-_gsJi_DW.js";import"./iconBase-FliByv4u.js";const te=l=>{const{state:n}=x.useContext(I),{adminInfo:u}=n,{isDrawerOpen:c,closeDrawer:r,setIsUpdate:h,lang:j}=x.useContext(L),[p,s]=x.useState(j||"en"),[g,o]=x.useState({}),[T,b]=x.useState(!1);V();const{register:f,handleSubmit:k,control:M,setValue:d,clearErrors:S,formState:{errors:U}}=ee(),O=async i=>{var C,t;try{b(!0);const m={rating:i.rating,comments:i.comments,status:i.status};if(l){const N=await y.updateReview(l,m);h(!0),b(!1),P(N.message),r()}else{const N=await y.addPage(m);h(!0),b(!1),P(N.message),r()}}catch(m){E(m?(t=(C=m==null?void 0:m.response)==null?void 0:C.data)==null?void 0:t.message:m==null?void 0:m.message),b(!1),r()}},q=async()=>{var i,C;try{const t=await y.getReviewById(l);t&&(o(t),d("rating",t.data.rating),d("comments",t.data.comments),d("status",t.data.status))}catch(t){E(t?(C=(i=t==null?void 0:t.response)==null?void 0:i.data)==null?void 0:C.message:t==null?void 0:t.message)}},G=i=>{s(i),Object.keys(g).length>0&&d("name",g.name[i||"en"])};return x.useEffect(()=>{if(!c){o({}),d("rating"),d("comments"),d("status"),S("rating"),S("comments"),S("status"),s(j),d("language",p);return}l&&q()},[l,d,c,u.email,S]),{register:f,handleSubmit:k,onSubmit:O,language:p,errors:U,isSubmitting:T,handleSelectLanguage:G,Controller:se,control:M}},le=({id:l})=>{const{register:n,handleSubmit:u,onSubmit:c,errors:r,imageUrl:h,setImageUrl:j,isSubmitting:p,selectedDate:s,setSelectedDate:g,handleSelectLanguage:o,Controller:T,control:b}=te(l),{t:f}=B();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:l?e.jsx(A,{register:n,title:"Review",description:f("Updated your page necessary information from here")}):e.jsx(A,{register:n,title:"Add Review",description:"Add your review necessary information from here "})}),e.jsx($.Scrollbars,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:e.jsx(a.Card,{className:"overflow-y-scroll flex-grow scrollbar-hide w-full max-h-full",children:e.jsx(a.CardBody,{children:e.jsxs("form",{onSubmit:u(c),children:[e.jsxs("div",{className:"px-6 pt-8 flex-grow scrollbar-hide w-full max-h-full pb-40",children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(D,{label:"Rating"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(v,{register:n,label:"Rating",name:"rating",type:"text",placeholder:"Rating"}),e.jsx(R,{errorName:r.rating})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(D,{label:"Comment"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(ae,{register:n,label:"Comment",name:"comments",type:"text",placeholder:"Comment"}),e.jsx(R,{errorName:r.name})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(D,{label:"Status"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsxs(a.Select,{name:"status",...n("status",{required:"status is required!"}),children:[e.jsx("option",{value:"",defaultValue:!0,hidden:!0,children:" Choose Status "}),e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"})]}),e.jsx(R,{errorName:r.status})]})]})]}),e.jsx(w,{id:l,title:"Page",isSubmitting:p})]})})})})]})},re=({reviews:l,lang:n})=>{const{title:u,serviceId:c,handleModalOpen:r,handleUpdate:h,isSubmitting:j,handleResetPassword:p}=z();return e.jsxs(e.Fragment,{children:[e.jsx(Q,{id:c,title:u}),e.jsx(F,{children:e.jsx(le,{id:c})}),e.jsx(a.TableBody,{children:l==null?void 0:l.map(s=>{var g,o;return e.jsxs(a.TableRow,{children:[e.jsxs(a.TableCell,{children:[e.jsx("span",{className:"text-sm",children:(g=s==null?void 0:s.givenTo)==null?void 0:g.name})," "]}),e.jsx(a.TableCell,{children:e.jsx("span",{className:"text-sm ",children:(o=s==null?void 0:s.givenBy)==null?void 0:o.name})}),e.jsx(a.TableCell,{children:e.jsx("span",{className:"text-sm ",children:s==null?void 0:s.rating})}),e.jsx(a.TableCell,{children:e.jsx("span",{className:"text-sm ",children:s==null?void 0:s.comments.slice(0,15)})}),e.jsx(a.TableCell,{children:e.jsx("span",{className:"text-sm ",children:new Date(s==null?void 0:s.createdAt).toLocaleString()})}),e.jsx(a.TableCell,{className:"text-center text-xs",children:e.jsx(Z,{status:s==null?void 0:s.status})}),e.jsx(a.TableCell,{children:e.jsx(W,{id:s._id,review:s,isSubmitting:j,handleUpdate:h,handleModalOpen:r,title:s==null?void 0:s.name})})]},s._id)})})]})},qe=()=>{x.useContext(I);const{toggleDrawer:l,lang:n}=x.useContext(L),{data:u,loading:c,error:r}=_(()=>y.getAllReview()),{userRef:h,setRole:j,totalResults:p,resultsPerPage:s,dataTable:g,serviceData:o,handleChangePage:T,handleSubmitMyCategory:b}=H(u.data),{t:f}=B();return e.jsxs(e.Fragment,{children:[e.jsx(Y,{children:"Reviews"}),e.jsx(F,{children:e.jsx(J,{})}),c?e.jsx(K,{row:12,col:7,width:163,height:20}):r?e.jsx("span",{className:"text-center mx-auto text-red-500",children:r}):(o==null?void 0:o.length)!==0?e.jsxs(a.TableContainer,{className:"mb-8 rounded-b-lg",children:[e.jsxs(a.Table,{children:[e.jsx(a.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(a.TableCell,{children:"Given to"}),e.jsx(a.TableCell,{children:"Given By"}),e.jsx(a.TableCell,{children:"Rating"}),e.jsx(a.TableCell,{children:"Comment"}),e.jsx(a.TableCell,{children:"CreatedAt"}),e.jsx(a.TableCell,{className:"text-center",children:"Status"}),e.jsx(a.TableCell,{className:"text-right",children:f("StaffActionsTbl")})]})}),e.jsx(re,{reviews:g,lang:n})]}),e.jsx(a.TableFooter,{children:e.jsx(a.Pagination,{totalResults:p,resultsPerPage:s,onChange:T,label:"Table navigation"})})]}):e.jsx(X,{title:"Sorry, There are no review right now."})]})};export{qe as default};
